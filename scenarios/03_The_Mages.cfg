#textdomain wesnoth-An_Orcish_Might
#beginning hard, in general easy, problem when not every units. someone else recruit?
#Well at least the pathic rest of Rormuk’s horde was following him now, probably to a freezing death but who cares about their lives. His own life however did not seem any further away from death. It has now been weeks they have been searching foothills to look after a probable lie of his human prisoner, but what other option did he have? He had told of a fortress in the mountains where they would be safe from the weather. He could not check in any way if there was even a kernel of truth in this.
[scenario]
	id=03_The_Mages
    name= _ "03 The Mages"
    next_scenario=04_The_Clash
    map_file=03_The_Mages.map
    {TURNS 26 22 22}
    {DEFAULT_SCHEDULE}
    victory_when_enemies_defeated=no

    #Szenario Intro
    [story]
        [part]
            show_title=yes
            story = _ "Fleeing, running away! Again! Why must he always be running from something? Tragtrad could never catch a break. First, it was the weight of responsibility bearing down on him, then the looming shadow of Fal Khag, and now the relentless pursuit of the humans. But amidst the chaos, Tragtrad sought solace in the silver linings. Most of Rormuk's horde now trailed behind him, a ragged band of survivors clinging to his leadership. Among them was the welcome addition of goblin riders again, easing his fears of ambush lurking around every corner. Also, this time, when his horde encountered a troll clan in trouble, he had more than enough orcs to bully them into fighting for him, meaning he now commanded a true orc army, including trolls. Tragtrad thought on his ideas and ambitions, seeking a path to plunder Wesnoth for his own glory was the only way, it was Karzahn's dream to be avenged, as a bloodthorn Tragtrad had no other option, he needed to fight Wesnoth, he needed to be the one to end Wesnoth as it was right now, every bloodthorn would follow him, if he could accomplish that task.

(1/3)"  
        [/part]
        [part]
            show_title=yes
            story = _ "He found himself drawn to his prisoner for more information about the human kingdom, however the captive gnawed at his resolve, fueled by the human's assessments about the strength and especially number of human soldiers. Their raid on the humans was poorly timed, for logistical reasons and because the mountain passes only allowed it then, usually the orcs attacked in the spring, giving them more than enough time to return home and find shelter. Yet now it was already winter and they did not know where to go, as the biting cold beat down relentlessly on longlegged and shortlegged alike, he thought of Fal Khag, whose untimely challenge to his leadership was the reason for the perilous situation they now found themselves in, he was the reason why his horde was succumbing to the cold, he was the reason why Tragtrad could not return home to his nephews (assuming he had enough time), he was the reason!

(2/3)"
        [/part]
        [part]
            show_title=yes
            story = _ "As he massaged his fingers to remove the frost, Tragtrad grimaced, fearing that the bitter cold would extinguish his dreams of revenge on Fal Khag before they even had a chance to ignite. As Tragtrad grew more desperate with the cold, he began to question his prisoner. The prisoner spoke of a fortress in the mountains that promised a warm hearth and protection from the harsh elements. Tragtrad feared a trap, but he had no choice, for he knew that the elements were a merciless enemy that would not refrain from leaving more and more frozen corpses on the ground. With the spectre of impending doom breathing down his neck, Tragtrad walked on, frantically searching the mountainsides to find the shelter.

(3/3)"
        [/part]
        #[part]
        #    background=bigmap.png
        #    {JOURNEY_03_NEW}
        #[/part]
#------
    [/story]

    #Tragtrad side 1
	[side]
        type=Bloodthorn Orcish Leader
        id=Tragtrad
        side=1
        controller=human
        recruit=Wolf Rider,Troll Whelp
        team_name=Tragtrad_Orcs
        user_team_name= _"Tragtrad's Bloodthorns"

        #Economy
        {GOLD 400 280 200}
        {INCOME 10 4 0}
		[village]
			x=17
			y=25
		[/village]
		[village]
			x=22
			y=26
		[/village]
		[village]
			x=22
			y=29
		[/village]
		[village]
			x=26
			y=24
		[/village]
		[village]
			x=29
			y=21
		[/village]
		[village]
			x=29
			y=26
		[/village]
	[/side]

    #Left dark mage side 2
    [side]
        type=Shadow Mage
        id=Orion
        name= _ "Orion"
        side=2
        team_name=mages
        user_team_name= _"Teachers of the hidden school"
        controller=ai
        recruit=Rogue Mage,Thief#,Orcish Assassin
        profile="portraits/Orion.png"
        role = Talkmage
        [modifications]
            {TRAIT_INTELLIGENT}
            {TRAIT_RESILIENT}
        [/modifications]

        #KI
        controller=ai
        [ai]
            [avoid]
                x=28
                y=2
                radius=3
            [/avoid]
        [/ai]

        #Economy
        {GOLD 50 60 100}
        {INCOME 0 -8 6}
    [/side]

    #Light Mage side 3
	[side]
		type=Mage of Light
		id=Peter
		name= _ "Peter"
		side=3
        team_name=mages
        user_team_name= _"Teachers of the hidden school"
		recruit=White Mage,Young Ogre,Vampire Bat
        role = Talkmage
        [modifications]
            {TRAIT_QUICK}
            {TRAIT_RESILIENT}
        [/modifications]

        #KI
        controller=ai
        [ai]
            recruitment_pattern=White Mage,White Mage,Young Ogre,White Mage,White Mage,Young Ogre,Vampire Bat,White Mage,White Mage,Young Ogre,White Mage,White Mage,Young Ogre
            [avoid]
                x=28
                y=2
                radius=3
            [/avoid]
        [/ai]

        #Economy
        {GOLD 50 80 100}
        {INCOME 0 8 6}
	[/side]

    #Fire Mage side 4
	[side]
		type=Arch Mage
		id=Dieter
		name= _ "Dieter" #face sw TODO
		side=4
        team_name=mages
        user_team_name= _"Teachers of the hidden school"
		recruit=Red Mage,Young Ogre,Vampire Bat
        role = Talkmage
        [modifications]
            {TRAIT_STRONG}
            {TRAIT_RESILIENT}
        [/modifications]

        #KI
        controller=ai
        [ai]
            recruitment_pattern=Red Mage,Red Mage,Young Ogre,Red Mage,Red Mage,Young Ogre, Vampire Bat
           [avoid]
                x=28
                y=2
                radius=3
            [/avoid]
        [/ai]

        #Economy
        {GOLD 50 80 100}
        {INCOME 0 8 6}
	[/side]

    #Right dark mage side 5
	[side]
		type=Dark Sorcerer
		id=Mag Onalds
		name= _ "Mag Onalds"
		side=5
        team_name=mages
        user_team_name= _"Teachers of the hidden school"
		recruit=Dark Adept,Thief,Ghoul
        color=white
        role = Talkmage
        [modifications]
            {TRAIT_STRONG}
            {TRAIT_QUICK}
        [/modifications]

        #KI
        controller=ai
        [ai]
            [avoid]
                x=28
                y=2
                radius=3
            [/avoid]
        [/ai]

        [unit]
            type=Dragonfly
            x=40
            y=11
        [/unit]

        #Economy
        {GOLD 50 80 100}
        {INCOME 0 8 6}
        controller=ai
	[/side]

    #DEATH side 6
    [side]
        side=6
        controller = null
        hidden = yes
        team_name=mages
        id=Deathside
    [/side]

    #Introduce DEATH turn 2
    [event]
        name = turn 2 end
        [scroll_to]
            x = 2
            y = 24
        [/scroll_to]

        [modify_side]
            side= 6
            controller=ai
            recruit=#Orcish Assassin
            color = black
            save_id = Deathside
            scroll_to_leader = no

            #Economy
            {GOLD 0 0 0}
            {INCOME -2 -2 2}
            village_gold = 0
        [/modify_side]

        [unit]
            side= 6
            id=Death
            name= _ "Death"
            type=Orcish Death
            random_traits=no
            unrenamable = yes
            canrecruit=no
            #extra_recruit = Orcish Assassin #,Orcish Slayer
            experience=11
            role = killer
            [modifications]
                {TRAIT_QUICK}
                [trait]
                    id=agile
                    name= _ "agile"
                    description= _ "Attacking units have a 20% lower chance to hit. Agility is the strongest trait, only very select units have this power. Units with the agility trait are often almost impossible to kill, which should be taken into account when setting up your troops."
                [/trait]
            [/modifications]
            x=2
            y=25
        [/unit]
        [unit]
            type=Orcish Assassin
            x=2
            y=24
            side=6
            role = newbies
            [modifications]
                {TRAIT_QUICK}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [unit]
            id=dudo
            name= _ "Dudor"
            type=Orcish Assassin
            x=3
            y=25
            side=6
            role = newbies
            experience=14
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
            [/modifications]
        [/unit]
        [micro_ai] #bring recruits north
            side= 6
            ai_type=messenger_escort
            action = add
            [filter]
                side= 6
                role = newbies
            [/filter]
            waypoint_x=3,3,3,3
            waypoint_y=22,18,14,10
        [/micro_ai]
        [micro_ai] #bring death east north
            side= 6
            ai_type=messenger_escort
            action = add
            [filter]
                side= 6
                role = killer
            [/filter]
            waypoint_x=28
            waypoint_y=2
        [/micro_ai]
        [message]
            speaker=Death
            message= _ "Whoa, what is going on here?"
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "Aye, fellow orc, my name is Tragtrad, chief of the Bloodthorns, are you friend or foe?"
        [/message]
        [message]
            speaker=Death
            message= _ "I am neither friend nor foe, I am a simple trader."
        [/message]
        [message]
            speaker=Umaduro
            message= _ "A trader? But you don't have any goods with you?"
        [/message]
        [message]
            speaker=Death
            message= _ "Ahhh that's where you are wrong, my goods are always with me you see, I am a trader of lives."
        [/message]
        [message]
            speaker=Orion
            message= _ "Enough talk. I assume you're the one I bought the assassins from. I didn't expect a personal delivery to be honest."
        [/message]
        [message]
            speaker=Death
            message= _ "And you might be Orion I trust? Always nice to do business. But no normally I don't do delivery myself. But today I plan on catching two birds with one stone..."
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "You did not answer, friend or foe and tell me your name, I do not much like not knowing my counterparts name?"
        [/message]
        [message]
            speaker=Death
            message= _ "The name my mother gave me before she died in my arms is long forgotten, you might call me... Death. And I will not be your foe if you don't stand in my way."
        [/message]
    [/event]

    #timezones
        #Map Change
        [time_area]
        id = Meuchlerhaupt
        x=0,    1,    2,    3,      4,      5,      6,      7,      8,      9,      10,     11,     12,     13
        y=0-17, 0-17, 0-17, 0-17,   0-17,   1-18,   1-17,   10-18,  12-18,  13-19,  14-18,  15-18,  15-17,  16-17
        {MIDNIGHT}
        [/time_area]
        [time_area]
        id = Lightmage
        x=5,        6,      7,      8,      9,      10,     11,     12,     13,     14,     15,     16
        y=0-0,      0-0,    0-9,    0-11,   0-12,   0-13,   0-14,   0-14,   0-15,   0-16,   0-16,   14-15
        {MIDDAY}
        [/time_area]
        [time_area]
        id = Redmage
        x=16,       17,     18,     19,     20,     21,     22,     23,     24,     25,     26
        y=0-9,      0-9,    0-6,    0-6,    0-5,    0-5,    0-3,    0-3,    0-2,    0-2,    0-2
        {DAWN}
        [/time_area]    
        [time_area]
        id = Darkmage
        x=23,       24,     25,     26,     27,     28,     29,     30,     31,     32,     33,     34,     35,     36,     37,     38,     39,     40
        y=10-13,    10-14,  10-16,  9-16,   9-16,   9-15,   9-15,   9-13,   10-13,  11-13,  12-15,  12-16,  12-17,  12-18,  11-19,  10-19,  9-20,   8-18
        {MIDNIGHT}
        [/time_area]    

        #time normal west
        [event]
        name=die
        [filter]
            id=Orion
        [/filter]
        [time_area]
            id =Meuchlerhaupt
            remove = yes
        [/time_area]
        [message]
            speaker=Umaduro
            message= _ "The magic veil seems to be receding."
        [/message]
        [/event]

        #time normal northwest
        [event]
        name=die
        [filter]
            id=Peter
        [/filter]
        [time_area]
            id =Lightmage
            remove = yes
        [/time_area]
        [message]
            speaker=Umaduro
            message= _ "The magic veil seems to be receding."
        [/message]
        
        {PLACE_IMAGE items/book4.png 1 1}


        [/event]

        #time normal east
        [event]
        name=die
        [filter]
            id=Mag Onalds
        [/filter]
        [time_area]
            id =Darkmage
            remove = yes
        [/time_area]
        [message]
            speaker=Umaduro
            message= _ "The magic veil seems to be receding."
        [/message]
        [/event]

        #time normal northeast
        [event]
            name=die
            [filter]
                id=Dieter
            [/filter]
            [time_area]
                id =Redmage
                remove = yes
            [/time_area]
            [message]
                speaker=Umaduro
                message= _ "The magic veil seems to be receding."
            [/message]
        [/event]
    #-------

    #Map Change
    [label]
        x,y=36,14
        text= _ "Lonely Peak"
    [/label]
    [label]
        x,y=9,14
        text= _ "Craggies' Cove"
    [/label]

    {VOLK_IMMORTAL_AND_ATTACK}

    #Variables setter
    [event]
        name=prestart
        [set_variable]
            name=CoffinOpen
            value=no
        [/set_variable]
        [set_variable]
            name=Rocktaken
            value=no
        [/set_variable]
        [set_variable]
            name=Death_Stored
            value=no
        [/set_variable]
    [/event]

    #Objectives
    [event]
        name=prestart
        [objectives]
            side=1
            [objective]
                description= _ "Kill all Enemy Leaders"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Umaduro"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Tragtrad"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Manma"
                condition=lose
            [/objective]
            {TURNS_RUN_OUT}
            [gold_carryover]
                bonus=yes
                carryover_percentage=20
            [/gold_carryover]
        [/objectives]
        [recall]
            id=Umaduro
        [/recall]
        [unit] 
            id=Manma
            name= _ "Manma"
            unrenamable=yes
            type=$Prisoner_Manma.type
            side=1
            x=22
            y=27
            experience=$Prisoner_Manma.experience
            random_traits=no
            profile="portraits/humans/duelist.webp"
            [modifications]
                {TRAIT_LOYAL_HERO}
                {TRAIT_QUICK}
            [/modifications]
        [/unit]
	[/event]

    #Starting conversation
    [event]
        name=start
        [set_variable]
            name=book_taken
            value=no
        [/set_variable]
        [message]
            speaker=Tragtrad
            message= _ "What is this place?"
        [/message]
        [message]
            speaker=Manma
            message= _ "I've heard rumours, wasn't sure to believe them, but apparently they are true."
        [/message]
        [message]
            speaker=Umaduro
            message= _ "You weren't sure? But still let us look for it whilst freezing!"
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "Cousin calm. So human?"
        [/message]
        [message]
            speaker=Manma
            message= _ "A school for all sorts of mages, that are or aren't welcome in Wesnoth anymore."
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "AY MAGES, CAN YOU HEAR ME? WE ARE ONLY LOOKING FOR A PLACE TO REST THIS WINTER."
        [/message]
        [message]
            speaker=Peter
            message= _ "You've found us."
        [/message]
        [message]
            speaker=Dieter
            message= _ "Prepare to die!"
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "Well, my orcs, we will have to wipe those mages out to have a warm winter. It will be a good opportunity to sharpen our blades once more. And human you have led us here, you will help us win this fight."
        [/message]
        [message]
            speaker=Manma
            message= _ "I will, don't want to freeze to death either, from what I've heard they aren't the most welcome to strangers, human or not."
        [/message]
        [message]
            speaker=Umaduro
            message= _ "Look around, tactically I would push a fairly large force, maybe a whole castle of archers and grunts, through the swamp to the eastern leader. Then move on to the smaller fortress, use mainly trolls for the western leader, they have some resistances and can heal themselves. You yourself should wait for the big advance of the other two leaders. After you have beaten back their main force, it's time to take the rest of your army north."
        [/message]
        [unit]
            id=Floyd
            name= _ "Floyd"
            type=Troll Hero
            canrecruit=no
            experience= 0
            x=21
            y=29
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DIM}
            [/modifications]
        [/unit]
        [message]
            speaker=Tragtrad
            message= _ "Floyd, did you hear that?"
        [/message]
        [message]
            speaker=Floyd
            message= _ "Floyd did hear. Floyd is pink"
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "What? ...anyway, remember what we said, you help us, we will remove the boulder in front of your cave, right?"
        [/message]
        [message]
            speaker=Floyd
            message= _ "(scratching his head) Right, Floyd did hear. Floyd is pink."
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "Riiight... just remember you are most useful when going to the left valley, hills and so on are there."
        [/message]
    [/event]

    #Hint talk mage
    [event]
        name=turn 3 end
        [message]
            speaker=Tragtrad
            message= _ "Human, how did you know about this place?"
        [/message]
        [message]
            speaker=Manma
            message= _ "I have a friend who often stayed at the court of my father, he lives here somewhere and hates the other mages, maybe he'll help us."
        [/message]
        [message]
            speaker=Manma
            message= _ "But if he really still lives here, I should talk to him, he doesn't like strangers. Or orcs."
        [/message]
    [/event]

    #Hint Talk timezones
    [event]
        name=turn 4 end
        [message]
            speaker=Umaduro
            message= _ "Hmmm, you see the magical darkness and light coming from their keeps?"
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "Now that you say it... That's gonna be a problem?"
        [/message]
    [/event]

    #hint talk mage two 5
    [event]
        name=turn 5 end
        [message]
            speaker=Tragtrad
            message= _ "Human, where is this old court-friend of yours?"
        [/message]
        [message]
            speaker=Manma
            message= _ "I don't know, but it will be a bit apart from the others, they would avoid him."
        [/message]
        [message]
            speaker=Umaduro
            message= _ "You are just trying to waste our time, human."
        [/message]
        [message]
            speaker=Manma
            message= _ "Will you ever have faith in me?"
        [/message]
        [message]
            speaker=Umaduro
            message= _ "Why should I?"
        [/message]
    [/event]

    #Story take village
    [event]
        name=capture
        first_time_only=yes
        [filter]
            side=1
            race=orc,wolf, goblin,troll
            x=31
            y=15
        [/filter]
        [message]
            speaker=unit
            message= _ "This ruin is empty - no mage here..."
        [/message]
        [unit]
            id=oldie
            type=citizen
            side=4
            x,y=30,15
            gender=female
            profile="portraits/relana.webp"
            [modifications]
                {TRAIT_WEAK}
                {TRAIT_AGED}
            [/modifications]
        [/unit]
        [message]
            speaker=unit
            message= _ "Ahh wait there is a old weakling here - Aye, are you a mage?!"
        [/message]
        [message]
            speaker=oldie
            message= _ "Nooo, I... I... I am only living here alone, m... my children have all left me here. Pl... Plea... Please, I don't have much but you can have it all."
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "OK, kill her and take what she has."
        [/message]
        [harm_unit]
            [filter]
                side= 4
                id = oldie
            [/filter]
            [filter_second]
                x=31
                y=15
            [/filter_second]
            amount = 100
            fire_event = yes
            animate = yes
            experience = yes
        [/harm_unit]
    [/event]
    
    #Story take village
    [event]
        name=capture
        first_time_only=yes
        [filter]
            side=1
            race=orc,wolf, goblin,troll
            x=18
            y=19
        [/filter]
        [unit]
            id=runn
            type=Peasant 
            side=3
            x,y=17,19
            gender=male
            [modifications]
                {TRAIT_INTELLIGENT}
                {TRAIT_QUICK}
            [/modifications]
        [/unit]
        [message]
            speaker=unit
            message= _ "Another longleg here."
        [/message]
        [harm_unit]
            [filter]
                id = runn
            [/filter]
            [filter_second]
                x=18
                y=19
            [/filter_second]
            amount = 0
            fire_event = yes
            animate = yes
            experience = yes
        [/harm_unit]
        [message]
            speaker=runn
            message= _ "Ahhhhhh orcs! Real orcs! Where is my family!"
        [/message]
        [move_unit]
            id=runn
            to_x=10
            to_y=4
        [/move_unit]
        [message]
            speaker=runn
            message= _ "L... lord... mi... milord... orcs... They are here, please sire, my family, they... they are..."
        [/message]
        [message]
            speaker=Peter
            message= _ "Don't worry my vassal. I will protect you."
        [/message]
        [message]
            speaker=runn
            message= _ "Yes sire, my family... I will find them..."
        [/message]
    [/event]

    #Death storyline trough scenario 4
    [event]
        name=last breath
        [filter]
            id=Orion
        [/filter]
        [message]
            speaker=Orion
            message= _ "Wait, don't kill me, I can help you."
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "Give me one reason why your life should be worth anything to me."
        [/message]
        [message]
            speaker=Orion
            message= _ "You don't have any assassins in your ranks. If you let me go, I can lead you to where I bought the assassins from."
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "Alright, your life is on the line. Well, it seems like we will find this 'Death' ourselves."
        [/message]
        [message]
            speaker=Umaduro
            message= _ "Another prisoner? Does not seem smart to me..."
        [/message]
    [/event]

    #death is sadist
        #Death sadist 1
        [event]
            name=attack
            first_time_only=yes
            [filter]
                side=1
                race=orc
            [/filter]
            [filter_second]
                side=2,6
                type=Orcish Assassin,Orcish Slayer
            [/filter_second]     
            [message]
                speaker=unit
                message= _ "Why do you let yourself be bought by a human? How can a true orc have so little self respect? Paah."
            [/message]
        [/event]

        #Death sadist 2
        [event]
            name=attack end
            first_time_only=yes
            [filter]
                side=1
                race=orc
            [/filter]
            [filter_second]
                side=2,6
                type=Orcish Assassin,Orcish Slayer
            [/filter_second]     
            [message]
                speaker=unit
                message= _ "Are you too afraid to answer? You should be."
            [/message]
        [/event]

        #Death sadist 3
        [event]
            name=die
            first_time_only=yes
            [filter]
                side=2,6
                type=Orcish Assassin,Orcish Slayer
            [/filter]
            [filter_second]
                side=1
                race=orc
            [/filter_second]     
            [message]
                speaker=second_unit
                message= _ "What a sad little orc. Not good blood."
            [/message]
            [message]
                speaker=second_unit
                message= _ "His tongue was cut out!"
            [/message]
        [/event]
    #-----

    #give Orion the units that get to him -- throws error
    [event]
        name = moveto
        first_time_only = no
        [filter]
            side= 6
            role = newbies
            x = 1,2,3,4,5
            y = 7-13,7-12,7-12,7-12,7-12 
        [/filter]
        [cancel_action]
        [/cancel_action]
        [modify_unit]
            [filter]
                id = $unit.id
            [/filter]
            side= 2
        [/modify_unit]
        [message]
            speaker=Orion
            message= _ "I hope you are as good killers as promised, your chance to prove it is now."
        [/message]
        [allow_recruit]
            side= 2
            type=Orcish Assassin
        [/allow_recruit]
        [gold]
            side=2
            amount=30
        [/gold]
    [/event]

    #Special Troll cave -- show first time
    [event]
        name= moveto
        first_time_only=yes
        [filter]
            side=1
            x=9
            y=14
        [/filter]
        [message]
            speaker=unit
            message= _ "OH NO A LANDSLIDE! DANGER, ROLLING STONES!"  
        [/message]        
        [terrain]
            x =9,9,10,10,13
            y =13,13,11,12,8
            terrain=Rb^Dr
        [/terrain]
        [terrain]
            x = 12
            y=  9
            terrain=Wwf
        [/terrain]
        [terrain]
            x = 11
            y=  10
            terrain=Ww^Dr
        [/terrain]
        [terrain]
            x = 11,12
            y=  9,10
            terrain=Wwg
        [/terrain]
        [terrain]
            x = 12
            y=  8
            terrain=Rb
        [/terrain]
        [terrain]
            x = 11
            y=  11
            terrain=Uhe
        [/terrain]
        [message]
            speaker=unit
            message= _ "Everyone alright?"  
        [/message]
        [message]
            speaker=unit
            message= _ "Hey, some kind of strange rock rolled here."  
        [/message]
        [message]
            race=troll
            message= _ "This is not just any Rock, THIS IS A GIFT OF ELVIS!"  
        [/message]
    [/event]

    #Special Troll cave -- take Rock
    [event]
        name= moveto
        first_time_only=no
        [filter]
            side=1
            x=9
            y=14
            race=troll
        [/filter]
        [if]
            [variable]
                name=Rocktaken
                equals=no
            [/variable]
            [then]
                [message]
                    speaker=unit
                    message= _ "Behold, this boulder before me bears the sign of Elvis himself. Blessed are we by his presence; this was no common landslide but Kentucky Rain. The shaman say we must fulfill his great will. (This unit will gain the ability to 'inspire' other trolls, which is the leadership ability for trolls of the same level or lower, only works on troll units)"
                    [option]
                        label=_ "Take it."
                        [command]
                            [modify_unit]
                                [filter]
                                    x=9
                                    y=14
                                [/filter]
                                [effect]
                                    apply_to=new_ability
                                    [abilities]
                                        {ABILITY_TROLL_INSPIRE}
                                    [/abilities]
                                [/effect]
                                role=elvisbearer
                            [/modify_unit]
                            [set_variable]
                                name=Rocktaken 
                                value=true
                            [/set_variable]
                            [message]
                                speaker=unit
                                message= _ "Trolls! Hear me out! Elvis has blessed us! We shall fight for his glory! We are no hound dogs! We are the fist to elvis' voice! We will crush our enemies!"
                            [/message]
                        [/command]
                    [/option]
                    [option]
                        label= _ "I am not worthy of this sign by Elvis himself. I can't claim it, someone else has to!"
                    [/option]
                [/message]
            [/then]
        [/if]
    [/event]

    #Special attack book
    {PLACE_IMAGE items/book2.png 15 2}
    {MAGIC_BOOK 15 2}

    #Special ghoul east Show          
    {PLACE_IMAGE items/coffin-closed.png 37 16}         #looks cool but doesn't work: {PLACE_IMAGE scenery/mausoleum21.png 37 16}
    [event]
        name = enter_hex
        first_time_only =true
        [cancel_action]
        [/cancel_action]
        [filter]
            x = 36,37,38,39
            y= 18,19,19,20
            side=1
        [/filter]
        [unit]
            name= _ "The Dumb"
            id = The Dumb
            type = Dark Adept
            hitpoints = 27
            x=39
            y=16
            side= 5
            [modifications]
                {TRAIT_DIM}
                {TRAIT_QUICK}
            [/modifications]
        [/unit]
        [unit]
            name = _ "The Smart"
            id = The Smart
            type = Dark Adept
            x=40
            y=15
            side= 5
            [modifications]
                {TRAIT_INTELLIGENT}
                {TRAIT_QUICK}
            [/modifications]
        [/unit]
        [message]
            speaker=The Smart
            message= _ "So you are afraid now?"
        [/message]
        [message]
            speaker=The Dumb
            image="portraits/humans/dark-adept.webp"~RIGHT()
            message= _ "Of course I'm not. It's just ... old Donald said not to go near that thing."
        [/message]
        [move_unit]
            side= 5
            id = The Smart
            to_x = 38
            to_y = 15
        [/move_unit]
        [message]
            speaker=The Smart
            message= _ "Yeah? He also said never to eat pineapple because it makes you fart louder, maybe Mag O. is just old, and you are frightened."
        [/message]
        [move_unit]
            side= 5
            id = The Dumb
            to_x = 38
            to_y = 16
        [/move_unit]
        [message]
            speaker=The Dumb
            image="portraits/humans/dark-adept.webp"~RIGHT()
            message= _ "No I am not!"
        [/message]
        [message]
            speaker=The Smart
            message= _ "Then open it..."
        [/message]
        [message]
            speaker=The Dumb
            image="portraits/humans/dark-adept.webp"~RIGHT()
            message= _ "I will!"
        [/message]
        [message]
            speaker=The Smart
            message= _ "You will not!"
        [/message]
        [message]
            speaker=The Dumb
            image="portraits/humans/dark-adept.webp"~RIGHT()
            message= _ "I will!"
        [/message]
        [delay]
            time=1000
        [/delay]
        [harm_unit]
            [filter]
                side= 5
                id = The Dumb,The Smart
            [/filter]
            amount = 28
            fire_event = yes
            animate = yes
            experience = no
            poisoned = yes
        [/harm_unit]
        [move_unit]
            side= 5
            id = The Smart
            to_x = 40
            to_y = 10
        [/move_unit]
        [message]
            speaker=unit
            message= _ "Who were these idiots?"
        [/message]
    [/event]
    
    #Special ghoul east open
    [event]
        name = moveto
        first_time_only=no
        [filter]
            side= 1
            x = 37,38,38
            y= 16,15,16
        [/filter]
        [if]
            [variable]
                name = CoffinOpen
                equals= no
            [/variable]
            [then]
                [message]
                    speaker=unit
                    message= _ "There is something very creepy in there."
                [/message] 
                [message]
                    speaker=unit
                    [option]
                        message= _ "I love surprises! Open it!"
                        [command]                     
                            {REMOVE_IMAGE 37 16}
                            {PLACE_IMAGE items/coffin-open.png 37 16}  
                            [unit]
                                name= ""
                                type = Necrophage
                                hitpoints = 37
                                x=37
                                y=16
                                side= 5
                            [/unit]
                            [message]
                                speaker=unit
                                message= _ "Ihh kinda gross."
                            [/message]
                            [set_variable]
                                name=CoffinOpen
                                value=yes
                            [/set_variable]
                        [/command]
                    [/option]
                    [option]
                        message= _ "Naaaah I will not open a random coffin next to a necromancer!"
                    [/option]
                [/message]
            [/then]
        [/if]
    [/event]

    #Special ghoul east get something inside tomb later
    [event]
        name = moveto
        first_time_only=no
        [filter]
            side= 1
            x = 37
            y= 16
        [/filter]
        [if]
            [variable]
                name = CoffinOpen
                equals= yes
            [/variable]
            [then]
                [message]
                speaker=unit
                message= _ "There are a pair of boots here, shall I put them on? (The unit will gain the skirmisher ability)"
                [option]
                    [show_if]
                        [not]
                            race = nage
                        [/not]
                    [/show_if]
                    label= _ "Put them on."
                    [command]
                        [object]
                            id=swiftfeet
                            name= _ "Boots of swiftness"
                            image=items/boot.png 
                            duration=forever
                            description= _ "Putting on these shoes, you feel faster."
                            cannot_use_message= _ "You are not worthy."
                            [filter]
                                x=37
                                y=16
                            [/filter]
                            [then]
                                [set_variable]
                                    name=CoffinOpen
                                    value=looted
                                [/set_variable]
                            [/then]
                            [effect] 
                                apply_to=new_ability
                                [abilities]
                                    {ABILITY_SKIRMISHER}
                                [/abilities]
                            [/effect]
                        [/object]
                        [modify_unit]
                            [filter]
                                x=37
                                y=16
                            [/filter]
                            name = $this_unit.name + " the Runner"
                        [/modify_unit]
                    [/command]
                [/option]
                [option]
                    [show_if]
                        [not]
                            race = nage
                        [/not]
                    [/show_if]
                    label= _ "Nah I won't wear these."
                [/option]
                [option]
                    [show_if]
                        race=nage
                    [/show_if]
                    label= _ "Nah I can't wear these."
                [/option]
                [/message]
            [/then]
        [/if]
    [/event]

    #Tragtrad gets fearless
    [event]
        name = attack
        first_time_only=true
        [filter]
            side= 1
            id = Tragtrad
        [/filter]
        [filter_second]
            side= 6
            id = Death
        [/filter_second]
        [message]
            speaker = Tragtrad
            message= _ "You will die by my own sword!"
        [/message]
        [remove_trait]
            side= 1
            id=Tragtrad
            trait_id=weak
        [/remove_trait]
        [modify_unit]
            [filter]
                side= 1
                id = Tragtrad
            [/filter]
            {TRAIT_FEARLESS}
        [/modify_unit]
        [message]
            speaker = Death
            message= _ "You are quick to make enemies."
        [/message]
    [/event]

    #Somebody on Volks hut
    [event]
        name= moveto
        first_time_only=no
        [filter]
            x,y = 28,2 
            [not]
                id = Manma,Death,Volk
            [/not]
        [/filter]
        [message]
            speaker=unit
            message= _ "I don't like this place. It is filled with decay."
        [/message]
    [/event]

    #define SPAWN_VOLK
    [unit]
        id=Volk
        name= _ "Volk"
        unrenamable=yes
        type=Shady Mage
        side=1
        x,y=28,3
        experience = 79
        random_traits=no
        [modifications]
                {TRAIT_LOYAL}
                {TRAIT_RESILIENT}
        [/modifications]
    [/unit]
    #enddef

    #Manma find Volk
    [event]
        name= moveto
        first_time_only=yes
        [filter]
            side=1
            id=Manma
            x,y = 28,2 
        [/filter]
        [if]
            [variable]
                name=VolkAttacked
                not_equals=dead
            [/variable]
            [not]
                [have_unit]
                    id=Volk
                [/have_unit]
            [/not]
            [then]
                {SPAWN_VOLK}
                [message]
                    speaker=Volk
                    message= _ "Who dares disturb my rest!"
                [/message]
                [if]
                    [have_unit]
                        side= 6
                        id = Death
                    [/have_unit]
                    [then]
                        [message]
                            speaker=Volk
                            message= _ "Wait, there is some great danger here! Show yourself"
                        [/message]
                        [fire_event]
                                name=VolkKillsDeath
                        [/fire_event]
                    [/then]
                [/if]
                [fire_event]
                        name=Manma_meet_Volk
                [/fire_event]
            [/then]
        [/if]
    [/event]

    #Death finds Volk
    [event]
        name= moveto
        first_time_only=yes
        [filter]
            side=6
            id=Death
            x,y = 28,2 
        [/filter]
        [if]
            [variable]
                name=VolkAttacked
                not_equals=dead
            [/variable]
            [not]
                [have_unit]
                    id=Volk
                [/have_unit]
            [/not]
            [then]
                {SPAWN_VOLK}
                [message]
                    speaker=Volk
                    message= _ "Who dares disturb my rest!"
                [/message]
                [fire_event]
                        name=VolkKillsDeath
                [/fire_event]
                [fire_event]
                        name=Manma_meet_Volk
                [/fire_event]
            [/then]
        [/if]
    [/event]

    #Volk kills death
    [event]
        name=VolkKillsDeath
        first_time_only=yes
        [message]
            speaker=Death
            message= _ "Good morning mage, your clock is ticking, Death has been bought." 
        [/message]
        [message]
            speaker=Volk
            message= _ "Which of the bastards was it?"
        [/message]
        [message]
            role = Talkmage
            message= _ "You are dangerous; you need to die." 
        [/message]
        [message]
            speaker=Volk
            message= _ "You dare to oppose me openly? You should have kept leaving me alone." 
        [/message]
        [message]
            speaker=Volk
            message= _ "I must tell you, Death, I don't die easy, you're not the first one to find that out." 
        [/message]
        [harm_unit]
            [filter]
                id=Death
            [/filter]
            [filter_second]
                id = Volk
            [/filter_second]
            amount=150
            fire_event=yes
            animate=yes
            kill = no
            experience=no
        [/harm_unit]
        [fire_event]
            name=last breath
            [primary_unit]
                id = Death
            [/primary_unit]
        [/fire_event]
    [/event]

    #Volk helps you, Manma-talk
    [event]
        name=Manma_meet_Volk
        first_time_only=yes
        [message]
            speaker=Manma
            message= _ "(To Tragtrad) that is the friend I told you about." 
        [/message]
        [message]
            speaker=Manma
            message= _ "Volk! It's good to see you again. I was afraid the others would have killed you." 
        [/message]
        [message]
            speaker=Volk
            message= _ "Manma? Can it be you? And side by side with orcs?" 
        [/message]
        [message]
            speaker=Manma
            message= _ "It is a very long story, but for now will you help us fight these mages?" 
        [/message]
        [message]
            speaker=Volk
            message= _ "Together with orcs? Must it be?" 
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "Great mage we ask you for your mighty force." 
        [/message]
        [message]
            speaker=Volk
            message= _ "Well at least he asks nicely. Manma I will help you. For your father’s hospitality. May he rest in peace." 
        [/message]
        [message]
            speaker=Umaduro
            message= _ "Are we bootlicking humans now..." 
        [/message]
        [message]
            speaker=narrator
            image="wesnoth-icon.png"
            message= _ "Once per scenario Volk can deal any unit on the map 15 hp damage. Do this by right clicking the enemy you want to target. (15hp damage, only useable once per scenario, all units are possible targets, including your own)"
        [/message]
    [/event]

    #Death dies
	[event]
        name=last breath
        [filter]
            id=Death
        [/filter]
        [message]
            speaker=Death
            message= _ "AAAHHH." 
        [/message]
        [message]
            speaker=Death
            message= _ "(bleeding) I am wounded, but we will see each other again Tragtrad." 
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "How do you know my name?" 
        [/message]
        [store_unit]
            [filter]
                id=Death
            [/filter]
            kill=yes
            variable=Death_Stored
        [/store_unit]
    [/event]

    {SPECIAL_TROLL_DEATH}

	#Defeats
	{UMADURO_DEFEAT_DEATH}
	{TRAGTRAD_DEFEAT_DEATH}
	{MARAST_DEATH}
    {FLOYD_DEATH}

	#Defeat Manma dies
	[event]
        name=last breath
        [filter]
            id=Manma
        [/filter]

        [message]
            speaker=Tragtrad
            message= _ "Damn he was crucial to the plan"
        [/message]
        {FEEDBACK}
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
    #Defeat time runs out
    [event]
        name=time over
        [message]
            speaker=Tragtrad
            message= _ "Noo, Winter is coming."
        [/message]
        {FEEDBACK}
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]

    #Victory
    [event]
        name=enemies defeated
        [if]
            [variable]
                name=VolkAttacked
                equals=dead
            [/variable]
            [then]
                [unit]
                    id=Volk
                    name= _ "Volk"
                    unrenamable=yes
                    type=Shady Mage
                    side=1
                    x,y=18,18
                    experience = 0
                    random_traits=no
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                [/unit]
                [message]
                    speaker=Volk
                    message= _ "I cannot be killed!"
                [/message]
                [message]
                    speaker=Volk
                    message= _ "Well, this was quite fun actually. Manma I am coming with you!"
                [/message]
                [message]
                    speaker=Tragtrad
                    message= _ "Oh, really? That's gooood."
                [/message]
            [/then]
            [elseif]
                [have_unit]
                    id=Volk
                [/have_unit]
                [then]
                    [message]
                        speaker=Volk
                        message= _ "Well, this was quite fun actually. Manma I am coming with you!"
                    [/message]
                    [message]
                        speaker=Tragtrad
                        message= _ "Oh, really? That's gooood."
                    [/message]
                [/then]
            [/elseif]
            [else]
                {SPAWN_VOLK}
                [message]
                    speaker=Volk
                    message= _ "Gnawwwwww. Good morning."
                [/message]
                [message]
                    speaker=Volk
                    message= _ "What is going on here?"
                [/message]
                [if]
                    [have_unit]
                        side= 6
                        id = Death
                    [/have_unit]
                    [then]
                        [store_unit]
                            [filter]
                                id=Death
                            [/filter]
                            kill=no
                            variable=Death_Stored
                        [/store_unit]
                        [message]
                            speaker=Volk
                            message= _ "Wait, there is some great danger here! Show yourself"
                        [/message]
                        [fire_event]
                                name=VolkKillsDeath
                        [/fire_event]
                    [/then]
                [/if]
                [fire_event]
                    name=Manma_meet_Volk
                [/fire_event]
            [/else]
        [/if]
        [message]
            speaker=Tragtrad
            message= _ "My orcs, you have fought bravely! It is time for a feast, we will rest over the winter and with the first melting of snow in spring we will earn glory you have not dreamed about in your wildest dreams! You will be remembered for aeons to come! You are my orcs; you are my kin!"
        [/message]
        [if]
            [have_unit]
                side= 1
                type_adv_tree =Orcish Archer, Orcish Grunt, Wolf Rider 
                [not]
                    id = Umaduro, Tragtrad, 
                [/not]
            [/have_unit]
            [then]
                [modify_unit]
                    [filter]
                        side= 1
                        type_adv_tree =Orcish Archer, Orcish Grunt, Wolf Rider 
                        [not]
                            id = Umaduro, Tragtrad
                        [/not]
                    [/filter]
                    role = ralliedagain
                [/modify_unit]
                [message]
                    role=ralliedagain
                    message= _ "YES! FOR TRAGTRAD! FOR THE BLOODTHORNS!"
                [/message]                
            [/then]
        [/if]
        {FEEDBACK}
        [endlevel]
            bonus=yes
            carryover_percentage=20
            carryover_add=yes
            result=victory
        [/endlevel]
    [/event]

[/scenario]
