#textdomain wesnoth-An_Orcish_Might
[scenario]
    id = 05_Storming_the_Palace
    name = _"05 Storming the Palace"
    next_scenario = 06_Epilogue    
    map_file = 05_Storming_the_Palace.map
    turns = -1
    {NW_FULL_DAY}
    victory_when_enemies_defeated=no

    #Szenario Intro
    [story]
        [part]
            show_title=yes
            story = _ "Normally Tragtrad would be pleased, his plan seemed to be working, but Umaduro has avoided him ever since they crossed the Great River and he has not said a word to him. His cousin was not alone, many of his orcish brothers did not seem onboard with his plan, and that despite him only taking his veterans with him. When he was back and no longer in enemy territory he would have to fear a challenge to his rule Tragtrad thought worriedly.
            
(1/2)" 
        [/part]
        [part]
            show_title=yes
            story = _ "Crossing many a field, at first, the promise of the clans seemed to hold true, marching through the clans' lands, they were unperturbed. Every village they found along the road was vacant. Until finally their luck turned, only a few leagues north of Weldyn, and the royal palace. 
            
(2/2)" 
        [/part]
        #[part]
        #    background=bigmap.png
        #[/part]
#----------
    [/story]

    #side
        #Tragtrad side 1
        [side]
            type=Bloodthorn Orcish Leader
            id=Tragtrad
            side=1
            recruit=#Orcish Crossbowman,Orcish Warrior
            controller=human
            team_name=orcs
            user_team_name= _"Tragtrad's Bloodthorns"
            [filter_recall]
                id= hans peter
            [/filter_recall]
            {GOLD 0 0 0}
            {INCOME -2 -2 -2}
            village_gold=0
        [/side]

        #Fal Khag side 2
        [side]
            side=2
            controller = null
            hidden = yes
        [/side]

        #Lower_Left General side 3
        [side]
            type=Grand Marshal
            id=Heford
            name= _ "Rundars Shadow"
            side=3
            canrecruit=yes
            recruit=Royal Guard,Paladin,Master at Arms,Master Bowman,Grand Marshal
            team_name=Wesnoth
            [ai]
                grouping=defensive
            [/ai]
            {GOLD 200 260 200}
            {INCOME 30 36 30}
            defeat_condition = never

            #KI
            [ai]
                aggression =0.8
            [/ai]

            #villages
	    	    [village]
	    	    	x=8
	    	    	y=41
	    	    [/village]
	    	    [village]
	    	    	x=9
	    	    	y=42
	    	    [/village]
	    	    [village]
	    	    	x=10
	    	    	y=41
	    	    [/village]
	    	    [village]
	    	    	x=12
	    	    	y=41
	    	    [/village]
	    	    [village]
	    	    	x=11
	    	    	y=43
	    	    [/village]
	    	    [village]
	    	    	x=11
	    	    	y=44
	    	    [/village]
	    	    [village]
	    	    	x=7
	    	    	y=44
	    	    [/village]
	    	    [village]
	    	    	x=7
	    	    	y=45
	    	    [/village]
	    	    [village]
	    	    	x=10
	    	    	y=45
	    	    [/village]
	    	    [village]
	    	    	x=9
	    	    	y=46
	    	    [/village]
	    	    [village]
	    	    	x=12
	    	    	y=46
	    	    [/village]
            #-----
        [/side]

        #Lower_Right General side 4
        [side]
            type=Grand Marshal
            id=Heford2
            name= _ "Adirsus Shadow"
            side=4
            canrecruit=yes
            {GOLD 200 160 200}
            {INCOME 24 42 24}

            recruit=Royal Warrior,Cavalier,Arch Mage
            team_name=Wesnoth
            defeat_condition = never

            #KI
            [ai]
                grouping=defensive
            [/ai]

            #villages
	    	    [village]
	    	    	x=14
	    	    	y=41
	    	    [/village]
	    	    [village]
	    	    	x=17
	    	    	y=42
	    	    [/village]
	    	    [village]
	    	    	x=19
	    	    	y=41
	    	    [/village]
	    	    [village]
	    	    	x=18
	    	    	y=41
	    	    [/village]
	    	    [village]
	    	    	x=15
	    	    	y=43
	    	    [/village]
	    	    [village]
	    	    	x=15
	    	    	y=44
	    	    [/village]
	    	    [village]
	    	    	x=19
	    	    	y=44
	    	    [/village]
	    	    [village]
	    	    	x=19
	    	    	y=43
	    	    [/village]
	    	    [village]
	    	    	x=16
	    	    	y=45
	    	    [/village]
	    	    [village]
	    	    	x=17
	    	    	y=46
	    	    [/village]
	    	    [village]
	    	    	x=14
	    	    	y=46
	    	    [/village]
            #-----

        [/side]

        #King side 5
        [side]
            type=WOTG_King
            id=King
            name= _ "King Letarg"
            side=5
            canrecruit=yes
            team_name=Wesnoth
            recruit=
            {GOLD 300 0 300}
            {INCOME -2 -2 -2}
            [ai]
                passive_leader=yes
            [/ai]

            #villages
	    	    [village]
	    	    	x=3
	    	    	y=52
	    	    [/village]
	    	    [village]
	    	    	x=7
	    	    	y=51
	    	    [/village]
	    	    [village]
	    	    	x=10
	    	    	y=52
	    	    [/village]
	    	    [village]
	    	    	x=11
	    	    	y=51
	    	    [/village]
	    	    [village]
	    	    	x=13
	    	    	y=50
	    	    [/village]
	    	    [village]
	    	    	x=15
	    	    	y=51
	    	    [/village]
	    	    [village]
	    	    	x=16
	    	    	y=52
	    	    [/village]
	    	    [village]
	    	    	x=19
	    	    	y=51
	    	    [/village]
	    	    [village]
	    	    	x=23
	    	    	y=52
	    	    [/village]
            #----
            
            #armoured units
                [unit]
                    type = Halberdier
                    upkeep=free
                    max_moves=1
                    x = 14
                    y = 43
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status] 
                    role = armoured
                    facing=nw
                [/unit]
                [unit]
                    type = Halberdier
                    upkeep=free
                    max_moves=1
                    x = 14
                    y = 40
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status] 
                    role = armoured
                    facing=nw
                [/unit]
                [unit]
                    type = Halberdier
                    upkeep=free
                    max_moves=1
                    x = 12
                    y = 43
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status]
                    role = armoured
                    facing=ne
                [/unit]
                [unit]
                    type = Halberdier
                    upkeep=free
                    max_moves=1
                    x = 12
                    y = 40
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status] 
                    role = armoured
                    facing=ne
                [/unit]
                [unit]
                    type = Master Bowman
                    upkeep=free
                    max_moves=1
                    x = 13
                    y = 10
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status] 
                    role = armoured
                [/unit]
                [unit]
                    type = Halberdier
                    upkeep=free
                    max_moves=1
                    x = 6
                    y = 16
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status] 
                    role = armoured
                [/unit]
                [unit]
                    type = Arch Mage
                    upkeep=free
                    max_moves=1
                    x = 4
                    y = 14
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status] 
                    role = armoured
                [/unit]
                [unit]
                    type = Master Bowman
                    upkeep=free
                    max_moves=1
                    x = 23
                    y = 22
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status] 
                    role = armoured
                [/unit]
                [unit]
                    type = Master Bowman
                    upkeep=free
                    max_moves=1
                    x = 21
                    y = 21
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status] 
                    role = armoured
                [/unit]
                [unit]
                    type = Halberdier
                    upkeep=free
                    max_moves=1
                    x = 11
                    y = 23
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status] 
                    role = armoured
                [/unit]
                [unit]
                    type = Halberdier
                    upkeep=free
                    max_moves=1
                    x = 6
                    y = 19
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status]
                    role = armoured
                [/unit]
                [unit]
                    type = Halberdier
                    upkeep=free
                    max_moves=1
                    x = 18
                    y = 32
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [status]
                        guardian = yes 
                    [/status] 
                    role = armoured
                [/unit]
            #------
        [/side]

        #Generals Osten side 6
        [side]
            type=General
            id=Heford3
            name= _ "Levan"
            side=6
            canrecruit=yes
            recruit=Lancer,Swordsman,Longbowman,Mage of Light
            team_name=Wesnoth
            {GOLD 0 0 0}
            {INCOME 48 86 48} #TODO scale even more as long as the leader isn't dead
            defeat_condition = never

            #KI
            controller=ai
            [ai]
                recruitment_pattern=Swordsman,Swordsman,Swordsman,Swordsman,Swordsman,Longbowman,Longbowman,Longbowman,Lancer,Mage of Light
            [/ai]

            #villages
	    	    [village]
	    	    	x=22
	    	    	y=29
	    	    [/village]
	    	    [village]
	    	    	x=23
	    	    	y=32
	    	    [/village]
	    	    [village]
	    	    	x=19
	    	    	y=31
	    	    [/village]
	    	    [village]
	    	    	x=21
	    	    	y=35
	    	    [/village]
	    	    [village]
	    	    	x=17
	    	    	y=27
	    	    [/village]
	    	    [village]
	    	    	x=10
	    	    	y=33
	    	    [/village]
	    	    [village]
	    	    	x=10
	    	    	y=35
	    	    [/village]
	    	    [village]
	    	    	x=8
	    	    	y=33
	    	    [/village]
	    	    [village]
	    	    	x=4
	    	    	y=29
	    	    [/village]
            #-----
        [/side]

        #Generals Norden side 7
        [side]
            type=General
            id=Heford4
            name= _ "Lyrin"
            side=7
            canrecruit=yes
            recruit=Pikeman,Javelineer,Longbowman,Mage
            team_name=Wesnoth
            {GOLD 200 186 200}
            {INCOME 6 8 6}
            [ai]
                recruitment_pattern=Pikeman,Pikeman,Pikeman,Pikeman,Javelineer,Javelineer,Javelineer,Longbowman,Longbowman,Longbowman,Longbowman,Mage
                grouping=defensive
            [/ai]

            #villages
	    	    [village]
	    	    	x=17
	    	    	y=10
	    	    [/village]
	    	    [village]
	    	    	x=7
	    	    	y=12
	    	    [/village]
	    	    [village]
	    	    	x=7
	    	    	y=15
	    	    [/village]
	    	    [village]
	    	    	x=14
	    	    	y=15
	    	    [/village]
	    	    [village]
	    	    	x=17
	    	    	y=17
	    	    [/village]
            #----
        [/side]

        #Waitanende side 8
        [side]
            side=8
            controller = ai
            defeat_condition = never
            team_name=insurrection
            user_team_name=insurrection
            hidden = yes

            #KI
            [ai]
                grouping=defensive
                passive_leader=yes
            [/ai]
        [/side]

        #Rebels - orc friendly side 9
        [side]
            side=9
            controller = ai
            defeat_condition = never
            team_name=orcs
            user_team_name=insurrection
            hidden = yes

            #KI
            [ai]
                grouping=defensive
                passive_leader=yes
            [/ai]
        [/side]

        #rebel_sides
            [side]
                side=10
                controller=null
                gold=0
                income=-2
                hidden=yes
            [/side]
            [side]
                side=11
                controller=null
                gold=0
                income=-2
                hidden=yes
            [/side]
            [side]
                side=12
                controller=null
                gold=0
                income=-2
                hidden=yes
            [/side]
            #rebel side 3
            [side]
                side=13
                controller=ai
                recruit=Swordsman,Paladin,Duelist,Longbowman,General
                gold=0
                income=-2
                hidden=yes
                team_name=rrrebels
            [/side]
            #rebel side 4
            [side]
                side=14
                controller=ai
                recruit=Shock Trooper,Dragoon,Red Mage
                gold=0
                income=-2
                hidden=yes
                team_name=rrrebels
            [/side]
            [side]
                side=15
                controller=null
                gold=0
                income=-2
                hidden=yes
            [/side]
            #rebel side 6
            [side]
                side=16
                controller=ai
                recruit=Lancer,Spearman,Bowman,White Mage
                gold=0
                income=-2
                hidden=yes
                team_name=rrrebels
            [/side]
            #rebel side 7
            [side]
                side=17
                controller=ai
                recruit=Spearman,Javelineer,Bowman,Mage
                gold=0
                income=-2
                hidden=yes
                team_name=rrrebels
            [/side]
        #-----

        #undead side 18
        [side]
            controller=side
            hidden=yes
            defeat_condition=always
        [/side]
    #--------

    #Map Change
    [label]
        x,y=10,32
        text= _ "Rucity"
    [/label]
    [label]
        x,y=21,30
        text= _ "Woodsmagnate"
    [/label]

    {VOLK_IMMORTAL_AND_ATTACK}

    #Variables setter
    [event]
        name=prestart
        [set_variable]
            name=kingmood
            value=normal
        [/set_variable]
        [set_variable]
            name=after_turn_8
            value=no
        [/set_variable]
        [set_variable]
            name=General1tod
            value=no
        [/set_variable]
        [set_variable]
            name=General2tod
            value=no
        [/set_variable]
        [set_variable]
            name=Kingpos
            value=leftmid
        [/set_variable]
        [set_variable]
            name=recaller
            value=yes
        [/set_variable]     
        [set_variable]
            name=Riderkills
            value=0
        [/set_variable]
        [set_variable]
            name=togglespeach
            value=no
        [/set_variable]
        [set_variable]
            name=togglespeachKing
            value=no
        [/set_variable]        
        [set_variable]
            name=humanfriendly
            value=yes
        [/set_variable]
        [set_variable]
            name=rebellionnumber
            value=0
        [/set_variable]
    [/event]

    #prestart code
    [event]
        name=prestart
        #no longer recruit
        [disallow_recruit]
            side=1
            type=Troll Whelp, Orcish Archer,Orcish Grunt,Wolf Rider#,Bloodthorn Orc #needs blance
        [/disallow_recruit]
        #armoured icon
        [unit_overlay]
            side=2,3,4,5,6,7,8
            role = armoured
            image="misc/armour-icon.png"
            object_id=armouredpicture
            duration=forever
        [/unit_overlay]   
        #recall Umaduro
        [recall]
            id=Umaduro
            x=13
            y=2
        [/recall]
        #Make Umaduro look normal
        {MAKE_LOYAL_NORMAL Umaduro} 
        #Get your start units
        [fire_event]
            name=RecallUNITS
        [/fire_event]
        #Remove Manma from recall list
        [store_unit]
            variable=ManmaUnit
            kill=yes
            [filter]
                id=Manma
            [/filter]
        [/store_unit]
        #remove recall list
        [kill]
            side=1
            x,y=recall,recall
        [/kill]
        #make your units have no upkeep
        [modify_unit]
            [filter]
                side=1
            [/filter]
            [effect]
                apply_to=loyal
            [/effect]
        [/modify_unit]  
        #cowards flee
        [micro_ai]
            side=3,4,5,6,7
            ai_type=coward
            action = add
            [filter]
                role = cowards
            [/filter]
            distance=80
            attack_if_trapped=no
            seek_x= 1
            seek_y=1
            avoid_x=1
            avoid_y=1
        [/micro_ai]
        #set status for forced march
        [modify_unit]
            [filter]
                side=1
                role = helpers
            [/filter]
            [status]
                forcedToMarch=no
            [/status]
        [/modify_unit]
        #toggle tragtrad
        [set_menu_item]
            id=togglespeach_buttonv1
            description= _ "click this button to toggle Tragtrads speech after 'forced march' (currently Tragtrad does speak)."
            [show_if]
                [variable]
                    name=togglespeach
                    equals=no
                [/variable]
            [/show_if]
            [command]
                [set_variable]
                    name=togglespeach
                    value=yes
                [/set_variable]
            [/command]
        [/set_menu_item]
        [set_menu_item]
            id=togglespeach_buttonv2
            description= _ "click this button to toggle Tragtrads speech after 'forced march' (currently Tragtrad does not speak)."
            [show_if]
                [variable]
                    name=togglespeach
                    equals=yes
                [/variable]
            [/show_if]
            [command]
                [set_variable]
                    name=togglespeach
                    value=no
                [/set_variable]
            [/command]
        [/set_menu_item]
        #forced march button
        [set_menu_item]
            id = Gewaltmarsch
            description = _"forced march!"
            image = "misc/forced_march.png"
            [show_if]
                [have_unit]
                    side=1
                    x = $x1
                    y = $y1
                    formula = "self.hitpoints > 8"
                    formula = "self.moves < self.max_moves"
                    [not]
                        status=forcedToMarch
                    [/not]
                [/have_unit]
            [/show_if]
            [default_hotkey]
                key = f
            [/default_hotkey]
            [command]
                [modify_unit]
                    [filter]
                        side=1
                        x = $x1
                        y = $y1
                        formula = "self.hitpoints > 8"
                    [/filter]
                    hitpoints = "$($this_unit.hitpoints - 8)"
                    moves = "($this_unit.max_moves)"
                    [status]
                        forcedToMarch=yes
                    [/status]
                [/modify_unit]
                [unit_overlay]
                    side=1
                    x = $x1
                    y = $y1
                    formula = "self.hitpoints > 8"
                    image=misc/marched-icon.png
                    object_id=marched
                [/unit_overlay]
                [if]
                    [variable]
                        name=$this_unit.id
                        not_equals=tragtrad
                    [/variable]
                    [then]
                        [if]
                            [variable]
                                name=togglespeach
                                equals=no
                            [/variable]
                            [then]
                                [message]
                                    speaker=Tragtrad
                                    message= _ "You there! Don't stop, damn it!"
                                [/message]
                            [/then]
                        [/if]
                    [/then]
                [/if]
            [/command]
        [/set_menu_item]   
    [/event]

    #toggle available after turn one
    [event]
        name= turn 2 end
        #toggleKing
        [set_menu_item]
            id=togglespeachKing_buttonv1
            description= _ "click this button to toggle the Kings speech every turn (he still moves) (currently the king does speak)."
            [show_if]
                [variable]
                    name=togglespeachKing
                    equals=no
                [/variable]
            [/show_if]
            [command]
                [set_variable]
                    name=togglespeachKing
                    value=yes
                [/set_variable]
            [/command]
        [/set_menu_item]
        [set_menu_item]
            id=togglespeachKing_buttonv2
            description= _ "click this button to toggle the Kings speech every turn (he still moves) (currently the king does not speak)."
            [show_if]
                [variable]
                    name=togglespeachKing
                    equals=yes
                [/variable]
            [/show_if]
            [command]
                [set_variable]
                    name=togglespeachKing
                    value=no
                [/set_variable]
            [/command]
        [/set_menu_item]
    [/event]

    #Objectives
    [event]
        name=prestart
        [objectives]
            side=1
            [objective]
                description= _ "Storm the palace and capture the king by positioning an Orc/Goblin/Troll unit next to him."
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Tragtrad"
                condition=lose
            [/objective]
            [objective]
                description= _ "When he turns up - Death of Manma"
                condition=lose
            [/objective]
			[note]
				description= _ "Gold does not matter in this scenario, you can not recruit/recall and this is the last scenario, your units do not cost upkeep."
			[/note]
			[note]
				description= _ "Note that the time/turns works different in this scenario (one turn marks one hour)."
			[/note]
			[note]
				description= _ "After one day (24 hours/turns) forces loyal to the King will arrive from the road to the north."
			[/note]
			[note]
				description= _ "Proceed carefully many enemies can show up unexpectedly."
			[/note]
			[note]
				description= _ "By right clicking or pressing 'f' you can force your units to march, which gives them their max movepoints in exchange for 8 hp. This can be done once per unit at every turn, as long as that unit has more than 8 hp, and if the unit does not currently have the full movement."
			[/note]
			[note]
				description= _ "Some of the enemies' units wear heavy armor and can thus move only very slowly. You can see it, when they have an icon on the top right."
			[/note]
			[note]
                [show_if]
                    [variable]
                        name=Orcbonus
                        equals=yes
                    [/variable]
                [/show_if]
				description= _ "Tip: In the scenario using leadership is key - Tragtrad can reach Level 4 - Death is Level 4 - A troll should have a leadership ability"
			[/note]
			[note]
                [show_if]
                    [variable]
                        name=Orcbonus
                        not_equals=yes
                    [/variable]
                [/show_if]
				description= _ "Tip: In the scenario using leadership is key - Tragtrad can reach Level 4 - A troll should have a leadership ability"
			[/note]           
            {IS_LAST_SCENARIO}
        [/objectives]
    [/event]

    #recall your units
    [event]
        name = RecallUNITS
        first_time_only = no
        [if]
            [variable]
                name=recaller
                equals=yes
            [/variable]
            [then]
                [role]
                    side=1
                    search_recall_list= only
                    [and]
                        level=2,3,4,5,6
                    [/and]
                    type_adv_tree=Wolf Rider,Troll Hero,Troll Shaman,Troll Whelp,Orcish Archer,Orcish Assassin,Orcish Grunt,Orcish Leader,Dwarvish Mage,Bloodthorn Orcish Leader,Orcish Spear,Naga Dirkfang
                    role= helpers
                    [auto_recall]
                    [/auto_recall]
                    [else]
                        [set_variable]
                            name=recaller
                            value=no
                        [/set_variable]
                    [/else]
                [/role]
                [fire_event]
                    name = RecallUNITS
                [/fire_event]
            [/then]
            
            [else]
                [set_variable]
                    name=recaller
                    value=no
                [/set_variable]
                #recall dwarf
                [if]
                    [have_unit]
                        id = Tester
                        search_recall_list = yes
                    [/have_unit]
                    [then]
                        [recall]
                            id = Tester
                        [/recall]
                    [/then]
                [/if]
                #recall dwarf brother
                [if]
                    [have_unit]
                        id = Tester2
                        search_recall_list = yes
                    [/have_unit]
                    [then]
                        [recall]
                            id = Tester2
                        [/recall]
                    [/then]
                [/if]
                #recall naga
                [if]
                    [have_unit]
                        id = Marast the lost
                        search_recall_list = yes
                    [/have_unit]
                    [then]
                        [recall]
                            id = Marast the lost
                        [/recall]
                    [/then]
                [/if]  
                #Get Death 
                [if]
                    [variable]
                        name=Orcbonus
                        equals=yes
                    [/variable]
                    [then]
                        [unit]
                            id=Death
                            name= _ "Death"
                            type=Orcish Death
                            unrenamable = yes
                            canrecruit=no
                            experience=44
                            x=24
                            y=2
                        [/unit]
                        #TODO recriting anim?
                        [unit]
                            type = stronger Orcish Slayer
                            x,y=23,3
                        [/unit]
                        [unit]
                            type = stronger Orcish Slayer
                            x,y=25,3
                        [/unit]
                        [unit]
                            type = stronger Orcish Slayer
                            x,y=24,1
                        [/unit]
                    [/then]
                [/if] 
            [/else]
        [/if]
    [/event]

    #Starting conversation
    [event]
        name=start
        [message]
            speaker=Tragtrad 
            message= _ "Folks, we have arrived; the royal palace is a day’s march to the south."
        [/message]
        [message]
            speaker=Tragtrad 
            message= _ "But we cannot rest now, that King has already assembled a small army. We will push on immediately, leave no one that stands in our way alive."
        [/message]
        
        
        #[message]
        #    speaker=King 
        #    message= _ "I handpicked my generals (each one own events/story)...."
        #[/message]
        {HIGHLIGHT_IMAGE 13 49 items/gohere.png ()}
        [message]
            speaker=King
            message= _ "ORCS! ORCS! ORCS! ORCS IN MY CAPITAL. Kill them, kill them all, leave none of those beasts alive!"        
        [/message]
        [message]
            speaker=Heford
            message= _ "Yes my king, those animals will suffer."        
        [/message]
        [message]
            speaker=Heford2
            image="portraits/humans/marshal-2.webp"~RIGHT()
            message= _ "The army is to return from Halstead within a day, time is on our side."        
        [/message]
        [message]
            speaker=King
            message= _ "You useless bastards kill them NOW and don't let them near me!"        
        [/message]
        [message]
            speaker=Tragtrad 
            message= _ "Humans listen to me! We need not be enemies, the people of wesnoth and orcs can coexist. Ignore the ramblings of your false king, we can work together to remove him. We want to help Wesnoth!"
        [/message]
        [message]
            speaker=Heford3 
            message= _ "I follow orders, my orders are to kill you orc. Do not take it personal. I only ever loved one person, and eversince I have failed I do not feel anymore, I follow orders."
        [/message]
        [message]
            speaker=Heford4 
            message= _ "I am as loyal as it gets to my kings! An orc before my eyes is a grateful opportunity to satisfy the hunger of my blade."
        [/message]
        [message]
            speaker=Volk 
            message= _ "Your honor in high regards sir bladebutcher, but I really doubt any human will fight on your side, no matter how much they hate their king..."
        [/message]
        [message]
            speaker=Tragtrad 
            message= _ "I know, it's still worth a shot, we are going to have to do this the hard way... or let's say the fun way..."
        [/message]
        [message]
            speaker=Tragtrad 
            message= _ "I am where Rormuk and Fal Khag have only ever dreamed, I will be in the palace of the humans, GRUNTS TO ME WE WILL FIGHT TO VICTORY OR DIE TRYING!"
        [/message]
        [message]
            speaker=Umaduro
            message= _ "Inspiring words as always Tragtrad, but do you see how many enemies we have? how exactly do you plan to win this?"        
        [/message]
        [message]
            speaker=Volk
            message= _ "I gotta agree with the short fella, your death seems guaranteed, obviously not mine."        
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "We just need to be quick, do not rest at all and we can ignore most of them. I will lead the charge myself!"
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "When we are inside, just decapitate that weak human king, Manma will turn up when the time comes and rally the humans behind him."
        [/message]
        #Death talk if you have him
        [if]
            [variable]
                name=Orcbonus
                equals=yes
            [/variable]
            [then]
                
                [message]
                    speaker=Death
                    message= _ "I brought three of my most talented students with me. Use them wisely—they are very unique!"
                [/message]
                
                [message]
                    speaker=Death
                    message= _ "Aye, I agreed to follow you Tragtrad, but this seems just suicidal?"        
                [/message]
            [/then]
        [/if]
        #Hint talk if you don't have enough units
        [if]
            [have_unit]
                side=1
                count=1-13
            [/have_unit]
            [then]
                [message]
                    speaker=Umaduro
                    message= _ "It looks like a very difficult battle ahaed, and we really don't have many units. Maybe if we'd performed better in the last battle..."        
                [/message]
            [/then]
        [/if]        
        #make Umaduro special by giving him special attack maybe talk on turn 2
        [message]
            speaker=Umaduro
            message= _ "I also have some new arrows that might prove useful."
        [/message]
        [modify_unit]
            [filter]
                id = Umaduro
            [/filter]
            [object]
                duration=forever
                [effect]
                    apply_to = new_attack
                    name=experimental_arrow
                    description=_"experimental arrow"
                    icon=attacks/blowgun.png
                    type=pierce
                    range=ranged
                    damage=10
                    number=2
                    [specials]
                        {WEAPON_SPECIAL_MARKSMAN}
                        {WEAPON_SPECIAL_STUN}
                    [/specials]
                [/effect]
            [/object]
        [/modify_unit]
        [message]
            speaker=Volk
            message= _ "And how did you get those, if I might ask?"
        [/message]
        [message]
            speaker=Umaduro
            message= _ "Pah, the point is I have them now. It would be dumb not to use them—doesn't matter who made them!"
        [/message]
    [/event]

    #King moves and talk | set forced march status to no every round | check rider mocked every round
        #King moves along the walls / allow forced march every round /check rider mocked every round
        [event]
            name=new turn
            first_time_only=no
            [filter_condition]
                [lua]
                    code = << return (wesnoth.get_variable("turn_number") > 1) >>
                [/lua]
            [/filter_condition]
            #King moves and fires talk event
                    [if]
                        [variable]
                            name=Kingpos 
                            equals=leftmid
                        [/variable]
                        [then]
                            [move_unit]
                            id = King
                            to_x = 17
                            to_y = 51
                            [/move_unit]
                            [set_variable]
                            name=Kingpos
                            value=right
                            [/set_variable]
                            [fire_event]
                            name = Kingtalks
                            [/fire_event]
                        [/then]
                        [elseif]
                            [variable]
                            name=Kingpos 
                            equals=rightmid
                            [/variable]
                            [then]
                            [move_unit]
                                id = King
                                to_x = 9
                                to_y = 51
                            [/move_unit]
                            [set_variable]
                                name=Kingpos
                                value=left
                            [/set_variable]
                            [fire_event]
                                name = Kingtalks
                            [/fire_event]
                            [/then]
                        [/elseif]
                        [elseif]
                            [variable]
                            name=Kingpos 
                            equals=left
                            [/variable]
                            [then]
                            [move_unit]
                                id = King
                                to_x = 13
                                to_y = 49
                            [/move_unit]
                            [set_variable]
                                name=Kingpos
                                value=leftmid
                            [/set_variable]
                            [fire_event]
                                name = Kingtalks
                            [/fire_event]
                            [/then]
                        [/elseif]
                        [elseif]
                            [variable]
                            name=Kingpos 
                            equals=right
                            [/variable]
                            [then]
                            [move_unit]
                                id = King
                                to_x = 13
                                to_y = 49
                            [/move_unit]
                            [set_variable]
                                name=Kingpos
                                value=rightmid
                            [/set_variable]
                            [fire_event]
                                name = Kingtalks
                            [/fire_event]
                            [/then]
                        [/elseif]
                        [else]
                            [move_unit]
                            id = King
                            to_x = 13
                            to_y = 49
                            [/move_unit]
                            [set_variable]
                            name=Kingpos
                            value=leftmid
                            [/set_variable]
                            [fire_event]
                            name = Kingtalks
                            [/fire_event]
                        [/else]
                    [/if]
            #allow forced march every round
            [modify_unit]
                [filter]
                    side=1
                [/filter]
                [status]
                    forcedToMarch=no
                [/status]
            [/modify_unit]
            
            [remove_unit_overlay]
                side=1
                image=misc/marched-icon.png
                object_id=marched
            [/remove_unit_overlay]
            #check Rider mocked
            [if]
                [variable]
                    name=Riderkills
                    greater_than_equal_to=2
                [/variable]
                [then]
                    [fire_event]
                        name = Riders change
                    [/fire_event]
                [/then]
            [/if]
        [/event]

        #make armored reset in case of stun or something
        [event]
            name=side 5 turn
            first_time_only=no
            [modify_unit]
                [filter]
                    role = armoured
                [/filter]
                max_moves=1
            [/modify_unit]
        [/event]

        #King talks on the walls
        [event]
            name=Kingtalks
            first_time_only=no
            #kings mood depending on enemy number/position
            [if]
                #king is frightened
                [have_unit]
                    side=2,5,8,9,10,11,12,13,14,15,16,17 #8 is waitpr can change
                    x=1-25
                    y=41-53
                    count=1-999
                [/have_unit]
                [or]
                    [have_unit]
                        side=2,5,8,9,10,11,12,13,14,15,16,17 #8 is waitpr can change
                        x=1-25
                        y=24-53
                        count=6-999
                    [/have_unit]
                [/or]
                [or]
                    [have_unit]
                        side=2,5,8,9,10,11,12,13,14,15,16,17 #8 is waitpr can change
                        x=1-25
                        y=10-53
                        count=16-999
                    [/have_unit]
                [/or]
                [then]
                    [set_variable]
                        name=kingmood
                        value=frightened
                    [/set_variable]
                [/then]
                #king is bold
                [elseif]
                    [have_unit]
                        side=2,5,8,9,10,11,12,13,14,15,16,17 #8 is waitpr can change
                        x=1-25
                        y=1-41
                        count=1-7
                    [/have_unit]
                    [then]
                        [set_variable]
                            name=kingmood
                            value=bold
                        [/set_variable]
                    [/then]
                [/elseif]
                #medium
                [else]
                    [set_variable]
                        name=kingmood
                        value=normal
                    [/set_variable]
                [/else]
            [/if]

            #king talks depending on mood
            [if]
                [variable]
                    name=togglespeachKing
                    equals= no
                [/variable]
                [then]
                    [if]
                        [variable]
                            name=kingmood
                            equals=frightened
                        [/variable]
                        [then]
                            [set_variable]
                                name=randomthreea
                                rand=1..4
                            [/set_variable]
                            [switch]
                                variable=randomthreea
                                [case]
                                    value="1"
                                    [message]
                                        image="portraits/human/konrad-human-concerned.webp"
                                        speaker=King
                                        message= _ "My barons are useless, all of them!"
                                    [/message]
                                [/case]
                                [case]
                                    value="2"
                                    [message]
                                        image="portraits/human/konrad-human-concerned.webp"
                                        speaker=King
                                        message= _ "Please leave me alone!"
                                    [/message]
                                [/case]
                                [case]
                                    value="3"
                                    [message]
                                        image="portraits/human/konrad-human-concerned.webp"
                                        speaker=King
                                        message= _ "Once there was a bird, one that was green, gold and blue, it gave me a vision, I am to be the king to be sung in legends... I will find the scepter... I will reunite with Elensefar... I will clense the world of orcs..."
                                    [/message]
                                [/case]
                                [case]
                                    value="4"
                                    [message]
                                        image="portraits/human/konrad-human-concerned.webp"
                                        speaker=King
                                        message= _ "Why? I was always good, this should not be happening, please..."
                                    [/message]
                                [/case]
                            [/switch]
                        [/then]
                        [elseif]
                            [variable]
                                name=kingmood
                                equals=bold
                            [/variable]
                            [then]
                                [set_variable]
                                    name=randomthreeb
                                    rand=1..4
                                [/set_variable]
                                [switch]
                                    variable=randomthreeb
                                    [case]
                                        value="1"
                                        [message]
                                            speaker=King
                                            message= _ "Useless bastards, all of you! Kill these beasts!"
                                        [/message]
                                    [/case]
                                    [case]
                                        value="2"
                                        [message]
                                            speaker=King
                                            message= _ "I AM THE KING I WILL NOT ALLOW ORCS IN WELDYN!"
                                        [/message]
                                    [/case]
                                    [case]
                                        value="3"
                                        [message]
                                            speaker=King
                                            message= _ "Whoever gives me the head of the big orc will be rewarded richly!"
                                        [/message]
                                    [/case]
                                    [case]
                                        value="4"
                                        [message]
                                            speaker=King
                                            message= _ "HA! Wesnoth will never fall to stupid grunts!"
                                        [/message]
                                    [/case]
                                [/switch]
                            [/then]
                        [/elseif]
                        [else]
                            [set_variable]
                                name=randomthreec
                                rand=1..7
                            [/set_variable]
                            [switch]
                                variable=randomthreec
                                [case]
                                    value="1"
                                    [message]
                                        speaker=King
                                        message= _ "Orcs in my capital! What has Wesnoth come to."
                                    [/message]
                                [/case]
                                [case]
                                    value="2"
                                    [message]
                                        speaker=King
                                        message= _ "Once wesnoth was strong, I will be the one to make wesnoth great again!"
                                    [/message]
                                [/case]
                                [case]
                                    value="3"
                                    [message]
                                        speaker=King
                                        message= _ "We have the worst laws, believe me when I say that, the worst laws, but I will fix them!"
                                    [/message]
                                [/case]
                                [case]
                                    value="4"
                                    [message]
                                        speaker=King
                                        message= _ "What's happening is a disgrace!"
                                    [/message]
                                [/case]
                                [case]
                                    value="5"
                                    [message]
                                        speaker=King
                                        message= _ "Nobody has ever done so much in the first year of a kingship as me. Nobody. Nobody!"
                                    [/message]
                                [/case]
                                [case]
                                    value="6"
                                    [message]
                                        speaker=King
                                        message= _ "To be honest – I'll be honest, I think it is a – I think we are very close to a complete victory."
                                    [/message]
                                [/case]
                                [case]
                                    value="7"
                                    [message]
                                        speaker=King
                                        message= _ "Fight my soldiers, fight!"
                                    [/message]
                                [/case]
                            [/switch]
                        [/else]
                    [/if]
                [/then]
            [/if]            

            {CLEAR_VARIABLE kingmood}
        [/event]
    #----------------

    #first village plunder decison
    [event]
        name = capture
        first_time_only = yes
        [filter]
            side=1
            race = orc, goblin, troll, wolf, naga, dwarf
        [/filter]
        [message]
            speaker=unit
            message= _ "Boss this hood is not empty as the ones before, shall we really not feast on the humans? (If you choose to plunder your orcs regain 16hp when destroying a village - you will however not keep your words to the humans)"#plunder food or eat humans?
            [option]
                label= _ "We should risk our lives, to save some human scum? Bugger that, my orcs will feast!"
                [command]
                    [set_variable]
                        name=humanfriendly
                        value=no
                    [/set_variable]
                    [message]
                        speaker=Umaduro 
                        message= _ "My orcs! Feast on the humans, replenish as you can!"
                    [/message]
                    [message]
                        speaker=Volk 
                        message= _ "I should warn you, the king is not well liked, but killing innocent farmers is not helping our popularity as well, expect strong resistance from the villagers."
                    [/message]
                [/command]
            [/option]
            [option]
                label= _ "I will keep my word, even if given to a human."
                [command]
                    [message]
                        speaker=Umaduro 
                        message= _ "Have you learned nothing from Orion? He already betrayed you!"
                    [/message]
                    [message]
                        speaker=Umaduro 
                        message= _ "You are no longer my cousin, Tragtrad. You have no orcish soul, no fighting spirit, no orcish will!"
                    [/message]
                    [set_variable]
                        name=humanfriendly
                        value=yes
                    [/set_variable]
                [/command]
            [/option]
        [/message]
    [/event]

    #you plunder north generals
    [event]
        name=moveto
        first_time_only=no
        [filter]
            side=1
            x=6
            y=11
        [/filter]
        [store_gold]
            side=7
            variable=side_7_gold
        [/store_gold]
        [if]
            [variable]
                name=side_7_gold
                greater_than_equal_to=1
            [/variable]
            [then]
                [message]
                    speaker=unit
                    message=_"The general had "+ $side_7_gold +" gold."
                [/message]
                [message]
                    speaker=Tragtrad
                    message=_"Take it, so they can no longer recruit."
                [/message]
                [gold]
                    side=1
                    amount=$side_7_gold
                [/gold]
                [gold]
                    side=7
                    amount=$(0-$side_7_gold)
                [/gold]
            [/then]
        [/if]
    [/event]

    #you plunder south generals
    [event]
        name=moveto
        first_time_only=no
        [filter]
            side=1
            x=24
            y=26
        [/filter]
        [store_gold]
            side=6
            variable=side_6_gold
        [/store_gold]
        [if]
            [variable]
                name=side_6_gold
                greater_than_equal_to=1
            [/variable]
            [then]
                [message]
                    speaker=unit
                    message=_"The general had "+ $side_6_gold +" gold."
                [/message]
                [message]
                    speaker=Tragtrad
                    message=_"Take it, so they can no longer recruit."
                [/message]
                [gold]
                    side=1
                    amount=$side_6_gold
                [/gold]
                [gold]
                    side=6
                    amount=$(0-$side_6_gold)
                [/gold]
            [/then]
        [/if]
    [/event]
    
    #human friendly events 
    
        #rebellion event
        [event]
            name=die
            first_time_only=no

            #One of the generals dies
            [filter]
                canrecruit=yes
                side=3,4,6,7
            [/filter]

            #variable loyalside current_rebelledside | variable rebelside current_rebelside
	    	[store_side]
                side=$unit.side
                variable=current_rebelledsidetemp
            [/store_side]
	    	[store_side]
                side=$unit.side
                variable=current_rebelsidetemp
            [/store_side]
			[set_variable]
				name=current_rebelledside
				value=$current_rebelledsidetemp.side
			[/set_variable]
			[set_variable]
				name=current_rebelside
				value=$current_rebelsidetemp.side
			[/set_variable]
            [set_variable]
                name=current_rebelside
                add=10
            [/set_variable]
            [set_variable]
                name=loyalgeneralii
                value= "placeholder"
            [/set_variable]

            #create new loyal general
            [store_unit]
                [filter]
                    side=$current_rebelledside
                    [and]
                        [not]
                            canrecruit=yes
                        [/not]
                    [/and]
                    [and]
                        [not]
                            x,y=recall,recall
                        [/not]
                    [/and]
                [/filter]
                variable=leaderdeadwarlordcandidates
            [/store_unit]     
            [for]
                array=leaderdeadwarlordcandidates
                [do]
                    [if]
                        [have_unit]
                            side=$current_rebelledside
                            canrecruit=yes
                        [/have_unit]
                        [then]
                        [/then]
                        [else]
                            [modify_unit]
                                [filter]
                                    id=$leaderdeadwarlordcandidates[$i].id
                                [/filter]
                                canrecruit=yes
                            [/modify_unit]
                            [set_variable]
                                name=loyalgeneralii
                                value= $leaderdeadwarlordcandidates[$i].id
                            [/set_variable]
                        [/else]
                    [/if]
                [/do]
            [/for]

            #loyal side talk
            [if]
                [have_unit]
                    id=King
                [/have_unit]
                [then]
                    [message]
                        speaker=King
                        message= _ "Sadly, my loyal servant has died. You, take his place and cleanse Wesnoth of its impurities!"
                    [/message]
                    [message]
                        speaker=$loyalgeneralii
                        message= _ "Yes sire, I will do as you command!"
                    [/message]
                [/then]
            [/if]

            #create rebel side if it doesn't exist if he doesn't exist
            [if]
                [have_unit]
                    canrecruit=yes
                    side=$current_rebelside
                [/have_unit]
                [then]
                [/then]
                [else]
                    [if]
                        [have_unit]
                            side=$current_rebelledside
                            [not]
                                trait=loyal
                            [/not]
                            count= 7-100
                            search_recall_list=no
                        [/have_unit]
                        [then]
                            [if]
                                [variable]
                                    name=humanfriendly
                                    equals=yes
                                [/variable]
                                [then]
                                    #create rebel leader
                                    [store_unit]
                                        [filter]
                                            side=$current_rebelledside
                                            [and]
                                                [not]
                                                    x,y=recall, recall
                                                [/not]
                                            [/and]
                                            [and]
                                                [not]
                                                    canrecruit=yes
                                                [/not]
                                            [/and]
                                            [and]
                                                [not]
                                                    trait=loyal
                                                [/not]
                                            [/and]
                                        [/filter]
                                        variable=leaderdeadsideunits
                                    [/store_unit]
                                    [for]
                                        array=leaderdeadsideunits
                                        [do]
                                            [if]
                                                [have_unit]
                                                    side=$current_rebelside
                                                    canrecruit=yes
                                                [/have_unit]
                                                [then]
                                                [/then]
                                                [else]
                                                    [modify_unit]
                                                        [filter]
                                                            id=$leaderdeadsideunits[$i].id
                                                        [/filter]
                                                        canrecruit=yes
                                                        side=$current_rebelside
                                                    [/modify_unit]
                                                [/else]
                                            [/if]
                                        [/do]
                                    [/for]
                        
                                    #give rebels half of all units
                                    [set_variable]
                                        name=alternatingvariable
                                        value=1
                                    [/set_variable]
                                    [store_unit]
                                        [filter]
                                            side=$current_rebelledside
                                            [and]
                                                [not]
                                                    x,y=recall, recall
                                                [/not]
                                            [/and]
                                            [and]
                                                [not]
                                                    canrecruit=yes
                                                [/not]
                                            [/and]
                                            [and]
                                                [not]
                                                    trait=loyal
                                                [/not]
                                            [/and]
                                        [/filter]
                                        variable=restunits
                                    [/store_unit]
                                    #give rebelside half of all units
                                    [for]
                                        array=restunits
                                        [do]	
                                            [if]
                                                [variable]  
                                                    name=alternatingvariable
                                                    equals="0"  
                                                [/variable] 
                                                [then]
                                                    [modify_unit]
                                                        [filter]
                                                            id=$restunits[$i].id
                                                        [/filter]
                                                        side=$current_rebelside
                                                    [/modify_unit]
                                                    [set_variable]
                                                        name=alternatingvariable
                                                        value=1
                                                    [/set_variable]
                                                [/then]
                                                [else]
                                                    [set_variable]
                                                        name=alternatingvariable
                                                        value=0
                                                    [/set_variable]
                                                [/else]
                                            [/if]
                                        [/do]
                                    [/for]
                
                                    #rebel talk
                                    [if]
                                        [have_unit]
                                            id=King
                                        [/have_unit]
                                        [then]
                                            [message]
                                                side=$current_rebelside
                                                canrecruit=yes
                                                [not]
                                                    id=unit
                                                [/not]
                                                image_pos=right
                                                message= _ "Men! why are we fighting for this cruel tyrant? Lay down your arms, don't give your life for a man, that is too cowardly to leave his palace!"
                                            [/message]
                                            [message]
                                                speaker=King
                                                message= _ "Treason!"
                                            [/message]
                                            [message]
                                                speaker=$loyalgeneralii
                                                message= _ "You dare abandon Wesnoth in its most dire hour of need? You shall suffer!"
                                            [/message]
                                        [/then]
                                    [/if]
                                [/then]
                            [/if]
                        [/then]
                    [/if]
                [/else]
            [/if]

            {CLEAR_VARIABLE loyalgeneralii}
            {CLEAR_VARIABLE current_rebelledsidetemp}
            {CLEAR_VARIABLE current_rebelsidetemp}
            {CLEAR_VARIABLE current_rebelledside}
            {CLEAR_VARIABLE current_rebelside}
            {CLEAR_VARIABLE leaderdeadwarlordcandidates}
        [/event]

        #rebel leader dies - units return and are loyal now
        [event]
            name= last breath
            first_time_only=no

            #One of the generals dies
            [filter]
                canrecruit=yes
                side=13,14,16,17
            [/filter]
            
            #variable rebelside dying_rebel_side | variable loyalside loyal_side
	    	[store_side]
                side=$unit.side
                variable=aab
            [/store_side]
			[set_variable]
				name=dying_rebel_side
				value=$aab.side
			[/set_variable]
			[set_variable]
				name=loyal_side
				value=$aab.side
			[/set_variable]
			[set_variable]
				name=loyal_side
				sub=10
			[/set_variable]

            [message]
                canrecruit=no
                side=$dying_rebel_side
                message= _"Sire, forgive us, we were mislead. Spare us and we will be your most loyal servants!"
            [/message]
            [modify_unit]
                [filter]
                    side=$dying_rebel_side
                    canrecruit=no
                [/filter]
                side=$loyal_side
                {TRAIT_LOYAL}
            [/modify_unit]
            {CLEAR_VARIABLE dying_rebel_side}
            {CLEAR_VARIABLE loyal_side}
        [/event]
    

        #Woodsmagnate defenders show up right village if you are a dick
        [event]
            name = enter_hex
            first_time_only =yes
            [filter]
                side=1
                x = 19,20,21,22,23
                y =29-31,29-31,29-32,28-31,29-32
            [/filter]
            [filter_condition]
                [variable]
                    name=humanfriendly
                    equals=yes
                [/variable]
            [/filter_condition]
            [cancel_action]
            [/cancel_action]
            [message]
                speaker= narrator
                message= _ "Should Woodsmagnate fight?"
            [/message]
            [message]
                speaker= narrator
                message= _ "And fight for the darksspawn? Never!"
            [/message]
        [/event]
        
        #Rucity defenders show up left village if you are a dick
        [event]
            name = enter_hex
            first_time_only =yes
            [filter]
                side=1
                x = 7,8,9,10,11,12
                y =33-34,32-34,32-35,32-35,33-35,33-34
            [/filter]
            [filter_condition]
                [variable]
                    name=humanfriendly
                    equals=yes
                [/variable]
            [/filter_condition]
            [cancel_action]
            [/cancel_action]
            [message]
                speaker= narrator
                message= _ "Should we fight?"
            [/message]
            [message]
                speaker= narrator
                message= _ "And die for the incompetent king? Never!"
            [/message]
        [/event]
    #------------

    #human unfriendly events
        #plunder villages moven upon
        [event]
            name = capture
            first_time_only = no
            [filter]
                side=1
                race = orc, goblin, troll, wolf
            [/filter]
            [if]
                [variable]
                    name=humanfriendly
                    equals=no
                [/variable]
                [then]
                    [message]
                        speaker=unit
                        message= _ "All cleared! I am refreshed!"
                    [/message]
                    [modify_unit]
                        [filter]
                            x = $x1
                            y = $y1
                        [/filter]
                        hitpoints = "$($this_unit.hitpoints + 22)"
                    [/modify_unit]
                    [terrain]
                        x = $x1
                        y = $y1
                        terrain=Rb^Dr
                    [/terrain]
                    [item]
                        x = $x1
                        y = $y1
                        image=scenery/village-human-burned2.png
                    [/item]
                    {GENERIC_UNIT 2 Peasant $x1 $y1}
                [/then]
            [/if]
        [/event]

        #variable turn after 8
        [event]
            name= turn 9
            [set_variable]
                name=after_turn_8
                value=yes
            [/set_variable]
        [/event]

        #You can eat humans
        [event]
            name = die 
            first_time_only=no
            [filter]
                race= human
                level=3,4,5 
                [not]
                    id= Heford,Heford2,Heford3,Heford4,Rider Leader,King #maybe add more? #no story relevant units etc.
                [/not]
            [/filter]
            [filter_second]
                side=1
                level=2,3,4,5
                race=wolf,orc
                [not]
                    id=Tragtrad,Umaduro
                [/not]
                formula = "self.hitpoints < 21"
            [/filter_second]            
            [filter_condition]
                [variable]
                    name=humanfriendly
                    equals=no
                [/variable]
                [and]
                    [variable]
                        name=after_turn_8
                        equals=yes
                    [/variable]
                [/and]
            [/filter_condition]
            [set_variable]
                name=randomone
                rand=1..100
            [/set_variable]
            [if]
                [variable]
                    name=randomone
                    less_than_equal_to=15
                [/variable]
                [then]
                    [if]
                        [variable]
                            name=humanfriendly
                            equals=no
                        [/variable]
                        [then]
                            [message]
                                speaker= second_unit
                                message= _ "I am hungry... I have been fighting all day!"
                            [/message]
                            [message]
                                speaker= Tragtrad
                                message= _ "Some tribes are turning soft, refusing to eat those that speak, calling it a barbaric old habit. Others say it’s what makes us orcs who we are. In a time like this, the choice we make will show the world where the Bloodthornes stand!"  
                                [option]  
                                    label= _ "The old ways are our strength! In this hour, we hold fast and show no weakness! Feast!"  
                                    [command]
                                        [modify_unit]
                                            [filter]
                                                id = $second_unit.id 
                                            [/filter]                                    
                                            hitpoints = "$($this_unit.hitpoints + 16)"
                                        [/modify_unit]
                                        [fire_event]
                                            name = humans_get_frightened
                                            [primary_unit]
                                                id = unit
                                            [/primary_unit]
                                        [/fire_event]
                                    [/command]
                                [/option]
                                [option]
                                    label= _ "True strength is knowing when to change. We will no longer feast on those we trade with!"  
                                [/option]
                            [/message]
                        [/then]
                    [/if]
                [/then]
            [/if]
        [/event]

        #frighten humans
        [event]
            name=humans_get_frightened
            first_time_only=no
            [set_variable]
                name=randomtwo
                rand=1..100
            [/set_variable]
            [if]
                [variable]
                    name=randomtwo
                    less_than_equal_to=10
                [/variable]
                [then]
                    [role]
                        side=3,4,5,6,7
                        level=1,2
                        race= human
                        canrecruit=no
                        role=runner
                    [/role]
                    [message]
                        speaker= runner
                        message= _ "AHHHHH they are eating us!"
                    [/message]
                    [modify_unit]
                        [filter]
                            role=runner
                        [/filter]
                        role = cowards
                        [abilities]
                            [skirmisher]
                                cumulative=no
                                id=cowardsrun
                                affect_self=yes
                            [/skirmisher]
                        [/abilities]
                    [/modify_unit]
                [/then]
            [/if]
        [/event]

        #Cowards escape when they get to the north edge
        [event]
            name=moveto
            first_time_only=no
            [filter]
                role=cowards
                side=3,4,5,6,7
                y=1
                x=1
            [/filter]
            [kill]
                id=$unit.id
            [/kill]
        [/event]

        #Woodsmagnate defenders show up right village if you are a dick
        [event]
            name = enter_hex
            first_time_only =yes
            [filter]
                side=1
                x = 19,20,21,22,23
                y =29-31,29-31,29-32,28-31,29-32
            [/filter]
            [filter_condition]
                [variable]
                    name=humanfriendly
                    equals=no
                [/variable]
            [/filter_condition]
            [cancel_action]
            [/cancel_action]
            [unit]
                type = Longbowman
                x = 19
                y = 29
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_RESILIENT}
                [/modifications]
            [/unit]
            [unit]
                type = Poacher
                x = 19
                y = 31
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_RESILIENT}
                [/modifications]
            [/unit]
            [unit]
                type = Spearman
                x = 23
                y = 31
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_RESILIENT}
                [/modifications]
            [/unit]
            [unit]
                type = Rogue
                id = east talker
                x = 21
                y = 30
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_RESILIENT}
                [/modifications]
            [/unit]
            [message]
                speaker= east talker
                message= _ "The people of Woodsmagnate will always fight orcs!"
            [/message]
        [/event]
        
        #Rucity defenders show up left village if you are a dick
        [event]
            name = enter_hex
            first_time_only =yes
            [filter]
                side=1
                x = 7,8,9,10,11,12
                y =33-34,32-34,32-35,32-35,33-35,33-34
            [/filter]
            [filter_condition]
                [variable]
                    name=humanfriendly
                    equals=no
                [/variable]
            [/filter_condition]
            [cancel_action]
            [/cancel_action]
            [unit]
                type = Highwayman
                x = 9
                y = 32
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_RESILIENT}
                [/modifications]
            [/unit]
            [unit]
                type = Footpad
                x = 10
                y = 33
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_RESILIENT}
                [/modifications]
            [/unit]
            [unit]
                type = Spearman
                x = 12
                y = 34
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_RESILIENT}
                [/modifications]
            [/unit]
            [unit]
                type = Outlaw
                id = west talker
                x = 7
                y = 34
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_RESILIENT}
                [/modifications]
            [/unit]
            [unit]
                type = Rogue
                x = 10
                y = 34
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_RESILIENT}
                [/modifications]
            [/unit]
            [message]
                speaker= west talker
                message= _ "The people of Rucity will always fight orcs!"
            [/message]
        [/event]

        #define WEAK_FEARLESS_VO
            # Units with trait Fearless fight normally during unfavorable day/night times.
            [trait]
                id=lionhearted
                male_name= _ "lionhearted"
                description= _ "Day-time fighting penalty is reduced by 5 percent"
                help_text= _ "Having seen a long time fighting companion die, these individuals took heart and started fighting with even more valor no matther the circumstance."
                [effect]
                    apply_to="fearless"
                [/effect]
            [/trait]
        #enddef
        #define WEAK_FEARLESS_VT
            # Units with trait Fearless fight normally during unfavorable day/night times.
            [trait]
                id=gorillahearted
                male_name= _ "gorillahearted"
                description= _ "Day-time fighting penalty is reduced by 10 percent"
                help_text= _ "Having seen long time fightingcompanions die, these individuals took heart and started fighting with even more valor no matther the circumstance."
                [effect]
                    apply_to="fearless"
                [/effect]
            [/trait]
        #enddef
        #define WEAK_FEARLESS_VD
            # Units with trait Fearless fight normally during unfavorable day/night times.
            [trait]
                id=oxhearted
                male_name= _ "oxhearted"
                description= _ "Day-time fighting penalty is reduced by 15 percent"
                help_text= _ "Having seen many long time fightingcompanions fall, these indiviuals took heart and started fighting with even more valor no matther the circumstance."
                [effect]
                    apply_to="fearless"
                [/effect]
            [/trait]
        #enddef

        #whenever a non story relevent l3 orc,wolf dies there is a chance not story relevant l3 orc,wolf unit gets 'boosted' (trait that gives them a weaker version (3xstackable 5 percent reduction) of fearless - instead of intelligent)
        #Bug fearless does not work currently, order is not really random
        [event]
            name=die
            first_time_only=no
            [filter]
                side=1
                race=orc,wolf
                level=3,4
                [not]
                    id=Umaduro,Tragtrad,Death
                [/not]
            [/filter]
            [filter_condition]
                [variable]
                    name=humanfriendly
                    equals=no
                [/variable]
            [/filter_condition]
            [set_variable]
                name=randomone
                rand=1..100
            [/set_variable]

            [if]
                [variable]
                    name=randomone
                    less_than_equal_to=40
                [/variable]
                [then]
                    [store_unit]
                        [filter]
                            side=1
                            race=orc,wolf
                            level=3,4
                            [not]
                                id=Umaduro,Tragtrad,Death
                            [/not]
                            trait=intelligent,lionhearted,gorillahearted
                            [not]
                                id=unit.id
                            [/not]
                            [not]
                                id=$unit.id
                            [/not]
                        [/filter]
                        variable=booscanidates
                    [/store_unit]     
                    [set_variable]
                        name=have_boosted
                        value=no
                    [/set_variable]
                    [set_variable]
                        name=random_intell_unit
                        rand=0..$($booscanidates.length-1)
                    [/set_variable]
                    [if]
                        [have_unit]
                            id=$booscanidates[$random_intell_unit].id
                            trait=intelligent
                        [/have_unit]
                        [then]
                            [modify_unit]
                                [filter]
                                    id=$booscanidates[$random_intell_unit].id
                                    trait=intelligent
                                [/filter]
                                {WEAK_FEARLESS_VO}
                            [/modify_unit]
                            [remove_trait]
                                id=$booscanidates[$random_intell_unit].id
                                trait=intelligent
                                trait_id=intelligent
                            [/remove_trait]
                            [set_variable]
                                name=have_boosted
                                value=yes
                            [/set_variable]
                        [/then]
                        [elseif]
                            [have_unit]
                                id=$booscanidates[$random_intell_unit].id
                                trait=lionhearted
                            [/have_unit]
                            [then]
                                [modify_unit]
                                    [filter]
                                        id=$booscanidates[$random_intell_unit].id
                                        trait=lionhearted
                                    [/filter]
                                    {WEAK_FEARLESS_VT}
                                [/modify_unit]
                                [remove_trait]
                                    id=$booscanidates[$random_intell_unit].id
                                    trait=lionhearted
                                    trait_id=lionhearted
                                [/remove_trait]
                                [set_variable]
                                    name=have_boosted
                                    value=yes
                                [/set_variable]
                            [/then]
                        [/elseif]
                        [elseif]
                            [have_unit]
                                id=$booscanidates[$random_intell_unit].id
                                trait=gorillahearted
                            [/have_unit]
                            [then]
                                [modify_unit]
                                    [filter]
                                        id=$booscanidates[$random_intell_unit].id
                                        trait=gorillahearted
                                    [/filter]
                                    {WEAK_FEARLESS_VD}
                                [/modify_unit]
                                [remove_trait]
                                    id=$booscanidates[$random_intell_unit].id
                                    trait=gorillahearted
                                    trait_id=gorillahearted
                                [/remove_trait]
                                [set_variable]
                                    name=have_boosted
                                    value=yes
                                [/set_variable]
                            [/then]
                        [/elseif]
                    [/if]
                    [if]
                        [have_unit]
                            id=$booscanidates[$random_intell_unit].id
                            trait=intelligent
                        [/have_unit]
                        [then]
                            [message]
                                id=$booscanidates[$i].id
                                message = _"AAAAAHHHHHHH! " + $this_unit.name + _"I will avenge you, die human! Learn to kiss my blade!"
                            [/message]

                            {CLEAR_VARIABLE booscanidates}
                        [/then]
                    [/if]

                    #[for]
                    #    array=booscanidates
                    #    [do]
                    #        [if]
                    #            [variable]
                    #                name=have_boosted
                    #                value=no
                    #            [/variable]
                    #            [then]
                    #                [if]
                    #                    [have_unit]
                    #                        id=$booscanidates[$i].id
                    #                        trait=intelligent
                    #                    [/have_unit]
                    #                    [then]
                    #                        [modify_unit]
                    #                            [filter]
                    #                                id=$booscanidates[$i].id
                    #                                trait=intelligent
                    #                            [/filter]
                    #                            {WEAK_FEARLESS_VO}
                    #                        [/modify_unit]
                    #                        [remove_trait]
                    #                            id=$booscanidates[$i].id
                    #                            trait=intelligent
                    #                            trait_id=intelligent
                    #                        [/remove_trait]
                    #                        [set_variable]
                    #                            name=have_boosted
                    #                            value=yes
                    #                        [/set_variable]
                    #                    [/then]
                    #                    [elseif]
                    #                        [have_unit]
                    #                            id=$booscanidates[$i].id
                    #                            trait=lionhearted
                    #                        [/have_unit]
                    #                        [then]
                    #                            [modify_unit]
                    #                                [filter]
                    #                                    id=$booscanidates[$i].id
                    #                                    trait=lionhearted
                    #                                [/filter]
                    #                                {WEAK_FEARLESS_VT}
                    #                            [/modify_unit]
                    #                            [remove_trait]
                    #                                id=$booscanidates[$i].id
                    #                                trait=lionhearted
                    #                                trait_id=lionhearted
                    #                            [/remove_trait]
                    #                            [set_variable]
                    #                                name=have_boosted
                    #                                value=yes
                    #                            [/set_variable]
                    #                        [/then]
                    #                    [/elseif]
                    #                    [elseif]
                    #                        [have_unit]
                    #                            id=$booscanidates[$i].id
                    #                            trait=gorillahearted
                    #                        [/have_unit]
                    #                        [then]
                    #                            [modify_unit]
                    #                                [filter]
                    #                                    id=$booscanidates[$i].id
                    #                                    trait=gorillahearted
                    #                                [/filter]
                    #                                {WEAK_FEARLESS_VD}
                    #                            [/modify_unit]
                    #                            [remove_trait]
                    #                                id=$booscanidates[$i].id
                    #                                trait=gorillahearted
                    #                                trait_id=gorillahearted
                    #                            [/remove_trait]
                    #                            [set_variable]
                    #                                name=have_boosted
                    #                                value=yes
                    #                            [/set_variable]
                    #                        [/then]
                    #                    [/elseif]
                    #                [/if]
                    #                [if]
                    #                    [variable]
                    #                        name=have_boosted
                    #                        value=yes
                    #                    [/variable]
                    #                    [then]
                    #                        [message]
                    #                            id=$booscanidates[$i].id
                    #                            message = _"ORC FALLEN IN BATTLE GOOD ORC FIGHT FIGHT FIGHT FIGHT FIGHT!"
                    #                        [/message]
                    #                        
                    #                        {CLEAR_VARIABLE booscanidates}
                    #                    [/then]
                    #                [/if]
                    #            [/then]
                    #        [/if]
                    #    [/do]
                    #[/for]
                    {CLEAR_VARIABLE booscanidates}
                    [set_variable]
                        name=have_boosted
                        value=no
                    [/set_variable]
                [/then]
            [/if]
        [/event]
    #------
    
    #lich events
        ##Volk is stronger closer to the source, if too close he is drawn to it TODO
        #[event]
        #    name=turn 3 end
        #    [message]
        #        speaker=Volk
        #        message= _ "I feel an extremely strong power here, like I have "
        #    [/message]
        #[/event]

        #magical place 
        [event]
            name=moveto
            first_time_only=no
            [filter]
                side=1
                x=11
                y=39
                [not]
                    id=Volk
                [/not]
            [/filter]
            [if]
                [variable]
                    name=lich_summoned
                    not_equals=yes
                [/variable]
                [then]
                    [message]
                        speaker=unit
                        message= _ "This Place seems ... I don't know ... magical."
                    [/message]
                    [message]
                        speaker=Volk 
                        message= _ "I need to check it out!"
                    [/message]
                [/then]
            [/if]
        [/event]
    
        #magical Place Darken volk + lich
        [event]
            name=moveto
            first_time_only=yes
            [filter]
                id=Volk
                x=11
                y=39
            [/filter]
            [message]
                speaker=Volk 
                message= _ "There is some kind of dark power here! A magical seal, I will break it."
            [/message]
            [message]
                speaker=Volk 
                message= _ "I have searched for something like this for a long time!"
            [/message]
            [message]
                speaker=Volk 
                message= _ "The power it, it is too strong!"
            [/message]
            {THUNDER (
                [unit]
                    id=wesnoth_lich
                    name= _ "The Unspoken"
                    unrenamable=yes
                    type=The_Unspoken
                    canrecruit=no
                    side=18
                    x,y=12,39
                [/unit]
            )}
            {FLASH_LIGHTNING (
                [message]
                    speaker=wesnoth_lich 
                    message= _ "Two years ago my husband sealed me in this hole, I will not let Wesnoth have peace! Get out of my way! Lyrin, Levan, armies of Wesnoth I am coming for you!"
                [/message]
            )}
            [message]
                speaker=Volk 
                message= _ "No, no, no she is too strong for me!"
            [/message]
            [kill]
                id=Volk
            [/kill]
            [unit]
                id=fakemove
                name= ""
                unrenamable=yes
                type=Wisp
                side=8
                x,y=11,39
                random_traits=no
            [/unit]
            [move_unit]
                id=fakemove
                to_x=18
                to_y=18
            [/move_unit]
            [kill]
                id=fakemove
            [/kill]
            [unit]
                id=fakemove
                name= ""
                unrenamable=yes
                type=Greater Wisp
                side=8
                x,y=18,18
                random_traits=no
            [/unit]
            [move_unit]
                id=fakemove
                to_x=1
                to_y=7
            [/move_unit]
            [kill]
                id=fakemove
            [/kill]
            [message]
                speaker=King  
                message= _ "Are you out of your mind?! You have let her out?!"
            [/message]        
            [set_variable]
                name=lich_summoned
                value=yes
            [/set_variable]

            [message]
                speaker=wesnoth_lich  
                message= _ "Levan, Lyrin you were my most trusted friends and yet you betrayed me... You have been rewared richly... You will regret it now..."
            [/message]  
            [message]
                speaker=King  
                message= _ "They did what was best for wesnoth!"
            [/message]
            [if]
                [have_unit]
                    id=Heford3 
                [/have_unit]
                [then]
                    [message]
                        speaker=Heford3  
                        message= _ "I... I... I am sorry... You... I... I thought... and... safer if... "
                    [/message]  
                    [message]
                        speaker=wesnoth_lich  
                        message= _ "Stop bothering me with your shameful excuses!"
                    [/message]  
                    [message]
                        speaker=wesnoth_lich  
                        message= _ "You betrayed me, learn how IT FEELS!"
                    [/message] 
                    {SCROLL 21 21}
                    [transform_unit]
                        side=6
                        canrecruit=no
                        type=Longbowman
                        transform_to=Bone Shooter
                    [/transform_unit]
                    [transform_unit]
                        side=6
                        canrecruit=no
                        type=Master Bowman
                        transform_to=Banebow
                    [/transform_unit]
                    [transform_unit]
                        side=6
                        canrecruit=no
                        type=Swordsman
                        transform_to=Revenant
                    [/transform_unit]
                    [transform_unit]
                        side=6
                        canrecruit=no
                        type=Royal Guard
                        transform_to=Draug
                    [/transform_unit]
                    [transform_unit]
                        side=6
                        canrecruit=no
                        type=Lancer
                        transform_to=Chocobone
                    [/transform_unit]
                    [modify_unit]
                        [filter]
                            side=6
                            canrecruit=no
                            [not]
                                type=Mage of Light
                            [/not]
                        [/filter]
                        side=18
                    [/modify_unit]
                    [if]
                        [have_unit]
                            id=Heford4 
                        [/have_unit]
                        [then]
                            [message]
                                speaker=wesnoth_lich  
                                message= _ "Levan for you I have something very special... endless tourment " 
                            [/message]  
                            #TODO turn only half of his body undead?
                        [/then]
                        [else]
                            [message]
                                speaker=wesnoth_lich  
                                message= _ "You are lucky you are already dead Lyrin, my revange would have been wonderous..."
                            [/message]  
                            [message]
                                speaker=wesnoth_lich  
                                message= _ "It seems I'll have to make do with your decrepit bones..."
                            [/message]  
                            [unit]
                                type=Death Knight
                                canrecruit=no
                                id=Lyrin_dead
                                name=Lyrin
                                x=13
                                y=39
                                unrenamable=yes
                                side=18
                            [/unit] 
                        [/else]
                    [/if]
                [/then]
                [else]
                    [message]
                        speaker=wesnoth_lich  
                        message= _ "You are lucky you are already dead Levan, my revange would have been wonderous..."
                    [/message]  
                    [message]
                        speaker=wesnoth_lich  
                        message= _ "It seems I'll have to make do with your decrepit bones..."
                    [/message]  
                    [unit]
                        type=Death Knight
                        canrecruit=no
                        id=Levan_dead
                        name=Levan
                        x=11
                        y=40
                        unrenamable=yes
                        side=18
                    [/unit] 
                    [if]
                        [have_unit]
                            id=Heford4 
                        [/have_unit]
                        [then]
                            [message]
                                speaker=wesnoth_lich  
                                message= _ "Lyrin, you were always the more quite type, tell me what has my son promised you in exchange for betraying me?"
                            [/message]  
                            [harm_unit]
                                [filter]
                                    id=Heford4
                                [/filter]
                                [filter_second]
                                    id=wesnoth_lich
                                [/filter_second]
                                amount=9
                                kill=no
                                animate=yes
                                fire_event=yes
                                experience=no
                            [/harm_unit]
                            [message]
                                speaker=wesnoth_lich  
                                message= _ "Was it riches?"
                            [/message]  
                            [harm_unit]
                                [filter]
                                    id=Heford4
                                [/filter]
                                [filter_second]
                                    id=wesnoth_lich
                                [/filter_second]
                                amount=9
                                kill=no
                                animate=yes
                                fire_event=yes
                                experience=no
                            [/harm_unit]
                            [message]
                                speaker=wesnoth_lich  
                                message= _ "TELL ME, WHAT HAS HE PROMISED YOU FOR KILLING ME?"
                            [/message]  
                            [harm_unit]
                                [filter]
                                    id=Heford4
                                [/filter]
                                [filter_second]
                                    id=wesnoth_lich
                                [/filter_second]
                                amount=9
                                kill=no
                                animate=yes
                                fire_event=yes
                                experience=no
                            [/harm_unit]
                            [message]
                                speaker=Heford4  
                                message= _ "."
                            [/message]
                            [message]
                                speaker=wesnoth_lich  
                                message= _ "These will be the last minutes of your banal existence on my world, so enjoy them!"
                            [/message]
                            [message]
                                speaker=wesnoth_lich  
                                message= _ "You should know. I have always loved him more than you."
                            [/message]
                            [harm_unit]
                                [filter]
                                    id=Heford4
                                [/filter]
                                [filter_second]
                                    id=wesnoth_lich
                                [/filter_second]
                                amount=99
                                kill=yes
                                animate=yes
                                fire_event=yes
                                experience=no
                            [/harm_unit]
                        [/then]
                        [else]
                            [message]
                                speaker=wesnoth_lich  
                                message= _ "A true shame this orc has already gotten to you two, really a shame, at least your bones will be more loyal then your brains..."
                            [/message] 
                            [unit]
                                type=Death Knight
                                canrecruit=no
                                id=Lyrin_dead
                                name=Lyrin
                                x=13
                                y=39
                                unrenamable=yes
                                side=18
                            [/unit] 
                        [/else]
                    [/if]
                [/else]
            [/if]
        [/event]

        #villages
        [event]
            name=moveto
            first_time_only=no
            [filter]
                side=18
                terrain=V****
            [/filter]
            [modify_unit]
                [filter]
                    id=wesnoth_lich  
                [/filter]              
                hitpoints = "($this_unit.hitpoints+8)" 
            [/modify_unit]
        [/event]

        #respawn dead lyrin
        [event]
            name=die
            first_time_only=no
            [filter]
                id=Lyrin_dead
            [/filter]
            [if]
                [have_unit]
                    id=wesnoth_lich
                [/have_unit]
                [then]
                    [message]
                        speaker=wesnoth_lich
                        message=_"Ohhoho, don't think you can abandon me that easily, how did you say it 'you are my most loyal servant in the world'?"
                    [/message]
                    [unit]
                        type=Death Knight
                        canrecruit=no
                        id=Lyrin_dead
                        name=Lyrin
                        x=$x1
                        y=$y1
                        unrenamable=yes
                        side=18
                    [/unit] 
                [/then]
            [/if]
        [/event]

        #respawn dead lvan
        [event]
            name=die
            first_time_only=no
            [filter]
                id=Levan_dead
            [/filter]
            [if]
                [have_unit]
                    id=wesnoth_lich
                [/have_unit]
                [then]
                    [message]
                        speaker=wesnoth_lich
                        message=_"Levan, Levan, Levan... where do you think you are going? I have need of you."
                    [/message]
                    [unit]
                        type=Death Knight
                        canrecruit=no
                        id=Levan_dead
                        name=Levan
                        x=$x1
                        y=$y1
                        unrenamable=yes
                        side=18
                    [/unit] 
                [/then]
            [/if]
        [/event]
    #---------

    #Riders from Waitande events
        #spawn Riders
        [event]
            name = enter_hex
            first_time_only =yes
            [filter]
                side=1
                x = 0,  1,  2,  3,  4,  5,  6,  7,  8,  9,  10, 11
                y =22-30,22-31,21-31,21-32,20-32,20-34,19-34,20-32,19-31,20-31,21-27,23-27
            [/filter]

            [cancel_action]
            [/cancel_action]

            #Untere Riders
                [unit]
                    type = Mounted General
                    id = Rider Leader
                    x = 2
                    y = 27
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    [abilities]
                        {ABILITY_LEADERSHIP}
                    [/abilities]
                    role = turnRiders
                [/unit]
                [unit]
                    type = Lancer
                    x = 3
                    y = 28
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    role = turnRiders
                [/unit]
                [unit]
                    type = Horseman
                    x = 1
                    y = 28
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    role = turnRiders
                [/unit]
                [unit]
                    type = Lancer
                    x = 2
                    y = 26
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    role = turnRiders
                [/unit]
            #-----

            #Obere Riders
                [unit]
                    type = Knight
                    x = 1
                    y = 24
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    role = turnRiders
                [/unit]
                [unit]
                    type = Horseman
                    x = 3
                    y = 24
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    role = turnRiders
                [/unit]
                [unit]
                    type = Paladin
                    x = 2
                    y = 24
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    role = turnRiders
                [/unit]
                [unit]
                    type = Knight
                    x = 2
                    y = 25
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    role = turnRiders
                [/unit]
            #------

            [message]
                speaker= Rider Leader
                image= "portraits/deoran.webp"
                message= _ "The new baroness of Waitanende wants to pay homage to the King and has sent gifts from the great barony of Waitanende."
            [/message]
            [message]
                speaker= King
                message= _ "So the old gobermouch baron is finally dead?"
            [/message]
            [message]
                speaker= Rider Leader
                image= "portraits/deoran-sad.webp"
                message= _ "Yes, sadly, he died only two weeks ago after a short illness, his oldest daughter has inherited the barony of Waitanende, since no son has survived to adulthood. She wants to apologise for her father not coming to Halstead as ordered, it has taken her a while to get the estate in order, but now she wants to pay homage and has sent us ahead."
            [/message]
            [message]
                speaker= King
                message= _ "If the baroness wants to pay homage to me, you can start by squashing these orcs. If you do so then you will be richly rewarded. Though I doubt men from Waitanende can kill anything, especially orcs."
            [/message]
            [message]
                speaker= Rider Leader
                image= "portraits/deoran-mad.webp"
                message= _ "We shall rescue the King, men!"
            [/message]
            [message]
                speaker= King
                message= _ "Not 'rescue'. I am the king; you have to follow my orders!"
            [/message]
            [message]
                speaker= Tragtrad
                message= _ "Rider, we want to replace this king with a better one, don't stand in my way, or I will have to cut you down!"
            [/message]
            [message]
                speaker= Rider Leader
                image= "portraits/deoran-sad.webp"
                message= _ "You want to replace the king of Wesnoth, orc? A queer task if I might say so, especially for someone of your... origin. The men of Waitanende will fight for Wesnoth and never support those that violate the innocent."
            [/message]
        [/event]

        #Riders kill people
        [event]
            name=last breath
            first_time_only= no

            [filter]
                side=1, 2
                [not]
                    id=Tragtrad
                [/not]
            [/filter]

            [filter_second]
                side=5
                role  = turnRiders
            [/filter_second]

            [set_variable]
               name=Riderkills
               add=1
            [/set_variable]
            [message]
                speaker= King
                message= _ "You really managed to kill one of those savages? Didn't expect that, ha. Not from - Waitanende. It's hard to believe."
            [/message]
            [message]
                speaker= second_unit
                message= _ "..."
            [/message]
        [/event]

        #Riders change
        [event]
            name = Riders change
            first_time_only = yes
            [message]
                speaker= turnRiders
                message= _ "This king does not respect the honor of the men of Waitanende, I will not be insulted by the offspring of some dark magician."
            [/message]
            [message]
                role=turnRiders
                message= _ "The baroness has made all of us swear an oath to always protect Wesnoth. That is what is worth to die for, not the upstart queen’s son!"
            [/message]
            [if]
                [variable]
                    name=humanfriendly
                    equals=no
                [/variable]
                [then]
                    [message]
                        role=turnRiders
                        message= _ "To protect Wesnoth is to rid Wesnoth of its dark magic king! Men slaughter whoever stands in our way!"
                    [/message]
                    [message]
                        speaker=Tragtrad
                        message= _ "I think they will fight each other, get out of their way and they'll basically help us."
                    [/message]
                    [message]
                        speaker= King
                        message= _ "You dare to raise your sword against your king! Your life is forfeit traitor!"
                    [/message]
                    [modify_unit]
                        [filter]
                        side=5
                        role = turnRiders
                        [/filter]
                        side  = 8
                    [/modify_unit]
                [/then]
            [/if]
            [if]
                [variable]
                    name=humanfriendly
                    equals=yes
                [/variable]
                [then]
                    [message]
                        role=turnRiders
                        message= _ "Orc you have not butchered any villagers, I cannot believe I am saying this, but is it true you fought side by side with the great grandson of Haldric IV - is he with you?"
                    [/message]
                    [message]
                        speaker=Tragtrad
                        message= _ "It is true, my sword and that of Manma have drunken from the same blood, we fight the same foe for the same goal. He will be with us in the end."
                    [/message]
                    [message]
                        role=turnRiders
                        message= _ "Then I will fight for the descendants of the founder Haldric. That illegitimate son of darkness shall die by my own sword!"
                    [/message]
                    [modify_unit]
                        [filter]
                        side=5
                        role = turnRiders
                        [/filter]
                        side  = 9
                    [/modify_unit]
                    [message]
                        speaker= King
                        message= _ "You...You...You fight for the orcs? Against Wesnoth! Your life is forfeit traitor!"
                    [/message]
                [/then]
            [/if]
        [/event]
    #------

    #wesnoth last defense shows up (including Manherr, Manma)
    [event]
        name=enter_hex
        first_time_only=yes
        [filter]
            x = 1-27
            y= 36
            side=1
        [/filter]        
        [cancel_action]
        [/cancel_action]

        #Upper
        
            #Upper spawn
                [unit]
                type = Halberdier
                id = hh1
                max_moves=1
                x=25
                y=39
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Halberdier
                id = hh2
                max_moves=1
                x=25
                y=39
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Halberdier
                id = hh3
                max_moves=1
                x=25
                y=39
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Halberdier
                id = hh4
                max_moves=1
                x=25
                y=39
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Halberdier
                id = hh5
                max_moves=1
                x=25
                y=39
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Halberdier
                id = hh6
                max_moves=1
                x=25
                y=39
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Master Bowman
                id = bb1
                max_moves=1
                x=25
                y=39
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Master Bowman
                id = bb2
                max_moves=1
                x=25
                y=39
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Master Bowman
                id = bb3
                max_moves=1
                x=25
                y=39
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type =Grand Marshal
                id = north_helper
                x=25
                y=39
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                [/unit]
            #-----------

            #Upper talk
                [message]
                    speaker = north_helper
                    message = _ "Reinforcements from the family of Garardinans from Tath have arrived to rescue the King. His lordliness's daughter is with us to form a marriage pact."
                [/message]
                [message]
                    speaker = King
                    message = _ "This king needs not be rescued by the One Eyed Baron of Tath, this king is able to fight his own battles and will not marry woman that are far beneath his station; only two generations from peasants."
                [/message]
                [message]
                    speaker = north_helper
                    message = _ "As you say milord, soldiers Position."
                [/message]
            #-----

            #Upper Upper
                [move_unit]
                side=5
                id = hh1
                to_x = 15
                to_y = 37
                [/move_unit]

                [move_unit]
                side=5
                id = hh2
                to_x = 17
                to_y = 37
                [/move_unit]

                [move_unit]
                side=5
                id = bb1
                to_x = 16
                to_y = 37
                [/move_unit]

                [terrain]
                x = 15-17
                y=  37
                terrain=Ce
                [/terrain]
            #-----

            #Upper Mid
                [move_unit]
                side=5
                id = hh3
                to_x = 19
                to_y = 38
                [/move_unit]
            
                [move_unit]
                side=5
                id = hh4
                to_x = 21
                to_y = 38
                [/move_unit]
            
                [move_unit]
                side=5
                id = bb2
                to_x = 20
                to_y = 38
                [/move_unit]
            
                [terrain]
                x = 19-21
                y=  38
                terrain=Ce
                [/terrain]
            #-----

            #Upper lower
                [move_unit]
                side=5
                id = hh5
                to_x = 15
                to_y = 39
                [/move_unit]
            
                [move_unit]
                side=5
                id = hh6
                to_x = 17
                to_y = 39
                [/move_unit]
            
                [move_unit]
                side=5
                id = bb3
                to_x = 16
                to_y = 39
                [/move_unit]
            
                [terrain]
                x = 15-17
                y=  39
                terrain=Ce
                [/terrain]
            #-----

            #move Upper leader
            [move_unit]
                side=5
                id = north_helper
                to_x = 18
                to_y = 40
            [/move_unit]   

        #-----         
        
        #Rechts Manherr

            #Rechts/Manherr spawn
                [unit]
                type = Halberdier
                id = hh1r
                max_moves=1
                x=25
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                role = ManherrForce
                [/unit]

                [unit]
                type = Halberdier
                id = hh2r
                max_moves=1
                x=25
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                role = ManherrForce
                [/unit]

                [unit]
                type = Halberdier
                id = hh3r
                max_moves=1
                x=25
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                role = ManherrForce
                [/unit]

                [unit]
                type = Halberdier
                id = hh4r
                max_moves=1
                x=25
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                role = ManherrForce
                [/unit]

                [unit]
                type = Halberdier
                id = hh5r
                max_moves=1
                x=25
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                role = ManherrForce
                [/unit]

                [unit]
                type = Halberdier
                id = hh6r
                max_moves=1
                x=25
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                role = ManherrForce
                [/unit]

                [unit]
                type = Master Bowman
                id = bb1r
                max_moves=1
                x=25
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                role = ManherrForce
                [/unit]

                [unit]
                type = Master Bowman
                id = bb2r
                max_moves=1
                x=25
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                role = ManherrForce
                [/unit]

                [unit]
                type = Master Bowman
                id = bb3r
                max_moves=1
                x=25
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                role = ManherrForce
                [/unit]

                [unit]
                type =Lieutenant
                id = Manherr
                name= _"Manherr"
                x=21
                y=49
                side=5
                [modifications]
                    {TRAIT_LOYAL_HERO}
                    {TRAIT_INTELLIGENT}
                    {TRAIT_STRONG}
                [/modifications]
                role = ManherrForce
                [/unit]            
   
                [unit]
                id=Manma
                name= _ "Manma"
                unrenamable=yes
                type=$ManmaUnit.type
                side=5
                x,y=20,48
                experience=$ManmaUnit.experience
                random_traits=no
                role = ManherrForce
                [modifications]
                    {TRAIT_LOYAL_HERO}
                [/modifications]
                [/unit]
            #--------------

            #Rechts talk
                [message]
                    speaker = Manherr
                    message = _ "The barons of Parthyn have come to protect Wesnoth and rid it of all its evil! His royal cousin begs me to help the king."
                [/message]
                [message]
                    speaker = King
                    message = _ "I've always known my cousin’s barony to be among my most loyal."
                [/message]
                [message]
                    speaker = Manherr
                    message = _ "As you say milord, soldiers position."
                [/message]
                [message]
                    id = Umaduro
                    [not]
                        id=Death,Tragtrad
                    [/not]
                    [and]
                        race = orc
                    [/and]
                    message = _ "This traitorous bastard, Tragtrad you should have killed him, not let him flee."
                [/message]
                [message]
                    speaker = Tragtrad
                    message = _ "Let us hope he is in fact a traitor."
                [/message]
            #-----

            #Rechts Upper
                [move_unit]
                side=5
                id = hh1r
                to_x = 21
                to_y = 42
                [/move_unit]

                [move_unit]
                side=5
                id = hh2r
                to_x = 23
                to_y = 42
                [/move_unit]

                [move_unit]
                side=5
                id = bb1r
                to_x = 22
                to_y = 42
                [/move_unit]

                [terrain]
                x = 21-23
                y=  42
                terrain=Ce
                [/terrain]
            #-----

            #Rechts Mid
                [move_unit]
                side=5
                id = hh3r
                to_x = 23
                to_y = 44
                [/move_unit]
    
                [move_unit]
                side=5
                id = hh4r
                to_x = 25
                to_y = 44
                [/move_unit]
    
                [move_unit]
                side=5
                id = bb2r
                to_x = 24
                to_y = 44
                [/move_unit]
    
                [terrain]
                x = 23-25
                y=  44
                terrain=Ce
                [/terrain]
            #-----

            #Rechts lower
                [move_unit]
                side=5
                id = hh5r
                to_x = 20
                to_y = 45
                [/move_unit]
            
                [move_unit]
                side=5
                id = hh6r
                to_x = 22
                to_y = 45
                [/move_unit]
            
                [move_unit]
                side=5
                id = bb3r
                to_x = 21
                to_y = 46
                [/move_unit]
            
                [terrain]
                x = 20,21,22
                y=  45,46,45
                terrain=Ce
                [/terrain]
            #-----

            #move rechts leader(Manherr)
            [move_unit]
                side=5
                id = Manherr
                to_x = 24
                to_y = 47
            [/move_unit]
            [move_unit]
                side=5
                id = Manma
                to_x = 23
                to_y = 48
            [/move_unit]

        #------

        #Links
        
            #Links spawn
                [unit]
                type = Halberdier
                id = hh1l
                max_moves=1
                x=1
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Halberdier
                id = hh2l
                max_moves=1
                x=1
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Halberdier
                id = hh3l
                max_moves=1
                x=1
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Halberdier
                id = hh4l
                max_moves=1
                x=1
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Halberdier
                id = hh5l
                max_moves=1
                x=1
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Halberdier
                id = hh6l
                max_moves=1
                x=1
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Master Bowman
                id = bb1l
                max_moves=1
                x=1
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Master Bowman
                id = bb2l
                max_moves=1
                x=1
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type = Master Bowman
                id = bb3l
                max_moves=1
                x=1
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [status]
                    guardian = yes 
                [/status] 
                role = armoured
                [/unit]

                [unit]
                type =Grand Marshal
                id = south_helper
                x=1
                y=47
                side=5
                [modifications]
                    {TRAIT_LOYAL}
                    {TRAIT_FEARLESS}
                [/modifications]
                [/unit]
            #-----------

            #Links talk
                [message]
                    speaker = south_helper
                    message = _ "Reinforcements from the Bay of Pearls have arrived to rescue the King. The barons are leading the main army here, to save the king."
                [/message]
                [message]
                    speaker = King
                    message = _ "I have not ordered that! Who dares to command my army? I gave the order to lay siege to Elensefar!"
                [/message]
                [message]
                    speaker = south_helper
                    message = _ "As you say milord, a rider will be sent to dispatch the orders, shall there be punishment for the ringleaders?"
                [/message]
                [message]
                    speaker = King
                    message = _ "Yes good point, I believe the responsible barons should fight the orcs here with their bare hands. But tell the army to come here and protect Weldyn!"
                [/message]
                [message]
                    speaker = south_helper
                    message = _ "As you say milord."
                [/message]
            #-----

            #Links Upper
                [move_unit]
                    side=5
                    id = hh1l
                    to_x = 4
                    to_y = 42
                [/move_unit]

                [move_unit]
                    side=5
                    id = hh2l
                    to_x = 6
                    to_y = 42
                [/move_unit]

                [move_unit]
                    side=5
                    id = bb1l
                    to_x = 5
                    to_y = 43
                [/move_unit]

                [terrain]
                    x = 4,5,6
                    y=  42,43,42
                    terrain=Ce
                [/terrain]
            #-----

            #Links Mid
                [move_unit]
                    side=5
                    id = hh3l
                    to_x = 1
                    to_y = 44
                [/move_unit]
            
                [move_unit]
                    side=5
                    id = hh4l
                    to_x = 3
                    to_y = 44
                [/move_unit]
            
                [move_unit]
                    side=5
                    id = bb2l
                    to_x = 2
                    to_y = 44
                [/move_unit]
            
                [terrain]
                    x = 1-3
                    y=  44
                    terrain=Ce
                [/terrain]
            #-----

            #Links lower
                [move_unit]
                    side=5
                    id = hh5l
                    to_x = 4
                    to_y = 46
                [/move_unit]
            
                [move_unit]
                    side=5
                    id = hh6l
                    to_x = 6
                    to_y = 46
                [/move_unit]
            
                [move_unit]
                    side=5
                    id = bb3l
                    to_x = 5
                    to_y = 47
                [/move_unit]
            
                [terrain]
                    x = 4,5,6
                    y=  46,47,46
                    terrain=Ce
                [/terrain]
            #-----
    
            #move links leader
            [move_unit]
                side=5
                id = south_helper
                to_x = 3
                to_y = 48
            [/move_unit]        
        
        #---------

        #armoured icon
        [unit_overlay]
            side=2,3,4,5,6,7,8
            role = armoured
            image="misc/armour-icon.png"
            object_id=armouredpicture
            duration=forever
        [/unit_overlay]
    [/event]

    #Manherr dies, harms one general, Manma and his units turn to your side
    [event]
        name = turn refresh
        first_time_only = no
        [if]
            [have_unit]
                side=5
                id=Manherr
            [/have_unit]
            [then]
                [message]
                    speaker=Manherr
                    message= _ "Men of Wesnoth! The true king, great grandson of Haldric IV, my brother, has returned to lead Wesnoth into a golden age! Bow to the true King Manma!"
                [/message]
                [message]
                    speaker=King
                    message= _ "Another traitor? I am surrounded by traitors! What have I done to deserve this."
                [/message]
                [message]
                    speaker=Manma
                    message= _ "Letarg, you are the son of an undead magi and an ambitious commoner, every second you sit in the rightful place of the sons of Haldric as myself is a second Wesnoth suffers. This will end today! I promise!"
                [/message]
                [role]
                    role = cccspea
                    side=3,4,6,7 
                    [not]
                        id=king
                    [/not]
                    search_recall_list=no
                [/role]
                [message]
                    speaker=cccspea
                    message= _ "You are only another ambitious lord, don't pretend you are doing this for Wesnoth."
                [/message]
                [if]
                    [have_unit]
                        side=5
                        role = turnRiders
                    [/have_unit]
                    [then]
                        [message]
                            speaker=Manma
                            message= _"What about your, riders of Waitande? Will you keep fighting for the spawn of darkness?"
                        [/message]
                        [message]
                            speaker= turnRiders
                            message= _ "You are right, this king does not respect the honor of the men of Waitanende, I shall not be insulted by the offspring of some dark magician."
                        [/message]
                        [message]
                            role=turnRiders
                            message= _ "The baroness has made all of us swear an oath to always protect Wesnoth. That is what is worth to die for, not the upstart queen’s son!"
                        [/message]
                        [if]
                            [variable]
                                name=humanfriendly
                                equals=no
                            [/variable]
                            [then]
                                [message]
                                    role=turnRiders
                                    message= _ "Manma you work side by side with those orcs, that murder our innocent farmers! We cannot fight for you, you are no better then him. To protect Wesnoth is to rid Wesnoth of its dark magic king! Men slaughter whoever stands in our way!"
                                [/message]
                                [message]
                                    speaker=Tragtrad
                                    message= _ "I think they will still fight each other, get out of their way and they'll basically help us."
                                [/message]
                                [message]
                                    speaker= King
                                    message= _ "You dare to raise your sword against your king! Your life is forfeit traitor!"
                                [/message]
                                [modify_unit]
                                    [filter]
                                    side=5
                                    role = turnRiders
                                    [/filter]
                                    side  = 8
                                [/modify_unit]
                            [/then]
                        [/if]
                        [if]
                            [variable]
                                name=humanfriendly
                                equals=yes
                            [/variable]
                            [then]
                                [message]
                                    role=turnRiders
                                    message= _ "Manma you are right, orc you have not butchered any villagers, I cannot believe I am saying this, but if it is your word Manma, great grandson of Haldric IV, I shall fight with you!"
                                [/message]
                                [message]
                                    speaker=Manma
                                    message= _ "It is true, my sword and that of Tragtrads have drunken from the same blood, we fight the same foe for the same goal. We fight together untill the end."
                                [/message]
                                [message]
                                    role=turnRiders
                                    message= _ "Then I will fight for the descendant of the founder Haldric. That illegitimate son of darkness shall die by my own sword!"
                                [/message]
                                [modify_unit]
                                    [filter]
                                    side=5
                                    role = turnRiders
                                    [/filter]
                                    side  = 1
                                [/modify_unit]
                                [message]
                                    speaker= King
                                    message= _ "You...You...You fight for the orcs? Against Wesnoth! Your life is forfeit traitor!"
                                [/message]
                            [/then]
                        [/if]
                    [/then]
                [/if]

                [if]
                    [variable]
                        name=humanfriendly
                        equals=no
                    [/variable]
                    [then]
                        [role]
                            role = talkersecond
                            side=3,4,6,7 
                            [not]
                                id=king
                            [/not]
                            [not]
                                role=cccspea
                            [/not]
                            search_recall_list=no
                        [/role]
                        [message]
                            speaker=talkersecond
                            message= _ "You fight on the same side as orcs, against the human kingdom, orcs that plunder our farmers, you stand against everything wesnoth was build on, you should be ashamed of yourself!"
                        [/message]
                    [/then]
                [/if]
                [move_unit]
                    side=4
                    canrecruit=no
                    to_x=17
                    to_y=44
                [/move_unit]
                [move_unit]
                    id=Manherr
                    to_x=17
                    to_y=44
                [/move_unit]
                [message]
                    speaker=Manherr
                    message= _ "Die! Do not stand in the way of the true king!"
                [/message]
                [harm_unit]
                    [filter]
                        id=Heford2
                    [/filter]
                    [filter_second]
                        id=Manherr
                    [/filter_second]
                    kill=no
                    amount=53
                    fire_event=yes
                    animate=yes
                    experience=yes
                [/harm_unit]
                [message]
                    speaker=Heford2
                    image="portraits/humans/marshal-2.webp"~RIGHT()
                    message= _ "You are a traitor to Wesnoth!"        
                [/message]
                [message]
                    speaker=Manherr
                    message= _ "I fight for Wesnoth!"
                [/message]
                [harm_unit]
                    [filter]
                        id=Manherr
                    [/filter]
                    [filter_second]
                        id=Heford2
                    [/filter_second]
                    amount=100
                    kill=yes
                    fire_event=yes
                    animate=yes
                    experience=yes
                [/harm_unit]
                [modify_unit]
                    [filter]
                    side=5
                    role = ManherrForce
                    [/filter]
                    side  = 9
                [/modify_unit]  
                [modify_unit]
                    [filter]
                        id=Manma
                    [/filter]
                    side  = 1
                [/modify_unit]  
                [message]
                    speaker=Manma
                    message= _ "Nooooooo, brother, you will be avenged! Letarg, prepare for your death! You are clinging to my throne unlawfully!"
                [/message]
            [/then]
        [/if]   
    [/event]

    #Fal khag shows up
    [event]
        name = die
        first_time_only = yes
        [filter]
            id=Heford2,Heford
        [/filter]
        [scroll_to]
            x = 5
            y = 40
        [/scroll_to]

        [modify_side]
            side=2
            id = Fal Khag
            controller=ai
            recruit = Orcish Warlord, Orcish Slurbow,Orcish Crossbowman,Orcish Warrior,Troll Hero
            team_name=dicks
            hidden = no
            village_support =2
            village_gold =3

            #Economy
            {GOLD 500 200 200}
            {INCOME 4 32 0}

            #KI
            [ai]
                passive_leader=yes
            [/ai]
        [/modify_side]

        [unit]
            side=2
            canrecruit = yes
            type= Orcish Warlord
            id=Fal Khag
            name= _ "Fal Khag"
            health = 23
            experience = 134
            x = 1
            y = 39
            profile=portraits/orcs/grunt-2.png
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]

        [message]
            speaker=Fal Khag
            message= _ "Wow folks, almost no resistance on the way here, seems like we are here."
        [/message]

        [message]
            speaker=King
            message= _ "More orcs? No, how! How deep has Wesnoth fallen as to roaming savages threating the rightful king!"
        [/message]

        [message]
            speaker=Tragtrad
            message= _ "Is that you Fal Khag?!"
        [/message]

        [message]
            speaker=Fal Khag
            message= _ "Tragtrad? Never 'ought I'd meet 'u here, still I won't mind 'illing you at all. Sorta unfinished 'usiness."
        [/message]

        [move_unit]
            side=2
            id = Fal Khag
            to_x = 4
            to_y = 36
        [/move_unit]

        [terrain]
            x =4
            y = 36
            terrain=Ke
        [/terrain]

        [terrain]
            x = 5,4,3,3,2
            y=  36, 35, 36 ,37,37
            terrain=Ce
        [/terrain]

        [unit]
            side=2
            type= Orcish Slurbow
            x = 3
            y = 38
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]

        [unit]
            side=2
            type= Orcish Warlord
            x = 2
            y = 36
            [modifications]
                {TRAIT_LOYAL}
            [/modifications]
        [/unit]

        [message]
            speaker=Fal Khag
            message= _ "Alright 'ill the orcish 'inclin and then the human 'inclin."
        [/message]

        #Umaduro or any unit betrays
        [if]
            [have_unit]
                id = Umaduro 
            [/have_unit]
            [then]
                [if]
                    [variable]
                        name=humanfriendly
                        equals=yes
                    [/variable]
                    [then]
                        [message]
                            speaker=Umaduro
                            message= _ "..."
                        [/message]
                        [message]
                            speaker=Umaduro
                            message= _ "Tragtrad, I ..."
                        [/message]
                        [move_unit]
                            side=1
                            id = Umaduro
                            to_x = 2
                            to_y = 36
                        [/move_unit]
                        [message]
                            speaker=Umaduro
                            message= _ "Fal Khag, you rightfully sit the bloodthorn throne, I will follow you"
                        [/message]
                        [modify_unit]
                            [filter]
                                id=Umaduro
                            [/filter]
                            side=2
                        [/modify_unit]

                        [message]
                            speaker=Fal Khag
                            message= _ "Ha! You see 'argtrad, even you closest 'ousin 'dons you!"
                        [/message]
                    [/then]
                [/if]
            [/then]
            [else]
                [if]
                    [variable]
                        name=humanfriendly
                        equals=yes
                    [/variable]
                    [then]
                        [role]
                            role = betrayer
                            type = Orcish Crossbowman, Orcish Slurbow, Orcish Warrior, Orcish Warlord,Goblin Knight,Direwolf Rider,Goblin Pillager
                            search_recall_list=no
                            side=1
                            [else]
                                [message]
                                    speaker=Tragtrad
                                    message= _ "This situation is hopeless, where are my grunts..."
                                [/message]
                            [/else]
                        [/role]
                        [message]
                            speaker=betrayer
                            message= _ "Yes, hahaha. Kill humans, not help them!"
                        [/message]
                        [message]
                            speaker=betrayer
                            message= _ "Tragtrad you are not a orc, go taste my blade, I fight for the true bloodthorn boss!"
                        [/message]
                        [move_unit]
                            side=1
                            role = betrayer
                            to_x = 2
                            to_y = 36
                        [/move_unit]
                        [modify_unit]
                            [filter]
                                role=betrayer
                            [/filter]
                            side=2
                        [/modify_unit]
                        [message]
                            speaker=Fal Khag
                            message= _ "Ha! 'ee Tragtrad, even you 'n grunts abandon you!"
                        [/message]
                    [/then]
                [/if]
            [/else]
        [/if]
    [/event]

    #Brücken sprengung
    [event]
        name = enter_hex
        first_time_only =yes
        [filter]
            x = 1-27
            y= 44
            side=1
        [/filter]
        
        [cancel_action]
        [/cancel_action]

        [message]
            speaker = King 
            message = _ "They are so close, how? how? how? blow up the bridges, NOW!"
        [/message]
        [terrain]
            x=3
            y=50
            terrain=ww
        [/terrain]
        [terrain]
            x=8,23,25
            y=52,50,50
            terrain=Wo
        [/terrain]
        [redraw]
        [/redraw]

        [message]
            speaker = unit 
            message = _ "Seems like some of those explosions have failed, boss. HE HE HE HE HE"
        [/message]

    [/event]

    #lich cannot go to king
    [event]
        name = enter_hex
        first_time_only = no
        [filter]
            id=wesnoth_lich
            x = 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
            y= 50,49,50,49,50,49,50,49,50,49,49,48,48,48,49,49,50,49,50,49,50,49,50,49,50
            side=1
        [/filter]

        [cancel_action]
        [/cancel_action]
        
        [message]
            speaker=wesnoth_lich
            message= _ "Wesnoth! Aaargh I cannot... no..."
        [/message]

        [move_unit]
            id=wesnoth_lich
            to_x = 12
            to_y = 39
        [/move_unit]
        
        [message]
            speaker=wesnoth_lich
            message= _ "My prison."
        [/message]
    [/event]

    #naga cannot go to king
    [event]
        name = enter_hex
        first_time_only = no
        [filter]
            race=naga
            x = 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25
            y= 50,49,50,49,50,49,50,49,50,49,49,48,48,48,49,49,50,49,50,49,50,49,50,49,50
            side=1
        [/filter]

        [cancel_action]
        [/cancel_action]
        
        [message]
            speaker=Marast the lost
            message= _ "Zzzzzzzzzz, notzzzzzzz gooodzzzzzzzzz. Nozzzzzz, zzzzzztrange plazzzze..."
        [/message]

        [move_unit]
            id=Marast the lost
            to_x = 11
            to_y = 48
        [/move_unit]
        
        [message]
            speaker=Marast the lost
            message= _ "Thizzzz izzzz your fight. Not minezzzzz."
        [/message]
    [/event]
    
    #Manma cannot go to king
    [event]
        name = enter_hex
        first_time_only =no
        [cancel_action]
        [/cancel_action]
        [filter]
            x =18,8
            y= 52,52
            id=Manma
        [/filter]
        [move_unit]
            id = Manma
            to_x = 19
            to_y = 52
        [/move_unit]
        [message]
            speaker = Tragtrad
            message = _ "For the power of the new era, an orc has to defeat the king."
        [/message]
    [/event]

    #wesnoth army arrives
        #Let enemies show up in the end regularly
        #define WESNOTH_ARMY TURN
        [event]
            name=turn {TURN}
            [if]
                [variable]
                    name=turn_number
                    numerical_equals=24
                [/variable]
                [then]
                    [message]
                        speaker=narrator
                        message= _ "Not even a full day had passed before the first advance elements of Wesnoth’s main army began to arrive..."
                        image="wesnoth-icon.png"
                    [/message]
                [/then]
                [else]
                    [message]
                        speaker=narrator
                        message= _ "Another advance element of the main Wesnoth army arrived..."
                        image="wesnoth-icon.png"
                    [/message]
                [/else]
            [/if]
            {GENERIC_UNIT 5 (Duelist) 1 8}
            {GENERIC_UNIT 5 (Red Mage) 2 8}
            {GENERIC_UNIT 5 (Javelineer) 1 10}
            {GENERIC_UNIT 5 (Pikeman) 3 8}
            {GENERIC_UNIT 5 (Lieutenant) 2 9}
            {GENERIC_UNIT 5 (Longbowman) 1 11}
            {GENERIC_UNIT 5 (Duelist) 2 10}
            [gold]
                side=3
                amount=50
            [/gold]
            [gold]
                side=4
                amount=50
            [/gold]
        [/event]
        #enddef


        {WESNOTH_ARMY 24}
        {WESNOTH_ARMY 28}
        {WESNOTH_ARMY 32}
        {WESNOTH_ARMY 36}
        {WESNOTH_ARMY 40}
        {WESNOTH_ARMY 44}
        {WESNOTH_ARMY 48}
        {WESNOTH_ARMY 52}
        {WESNOTH_ARMY 56}
        {WESNOTH_ARMY 60}
        {WESNOTH_ARMY 64}
        {WESNOTH_ARMY 68}
        {WESNOTH_ARMY 72}
        {WESNOTH_ARMY 76}
        {WESNOTH_ARMY 80}
        {WESNOTH_ARMY 84}
        {WESNOTH_ARMY 88}
    #-----------

    #Todesnachrichten
    #left general dead
    [event]
        name=die
        [filter]
            id=Heford
        [/filter]
        [set_variable]
            name=General1tod
            value=yes
        [/set_variable]
        [message]
            speaker=King
            message= _ "What! No! How! How can these stupid beasts be winning against me?"
        [/message]
    [/event]

    #right general dead
    [event]
        name=die
        [filter]
            id=Heford2
        [/filter]
        [set_variable]
            name=General2tod
            value=yes
        [/set_variable]

        [message]
            speaker=King
            message= _ "MY GENERALS NO! How can they lose this war for me! Why am I surrounded by idiots? Everything is turning against me!"
        [/message]
    [/event]

    #lich Death - humans betray
    [event]
        name=last breath
        [filter]
            id=wesnoth_lich
        [/filter]
        [message]
            speaker=wesnoth_lich
            message= _ "Dream not I would go, I curse you! For 60 long years there shall not be peace in my land of Wesnoth!"
        [/message]
        #[if]
        #    [have_unit]
        #        if=Heford
        #    [/have_unit]
        #    [then]
        #        [message]
        #            speaker=Heford           
        #            message= _ "NOOOO! I should never have betrayed Wesnoth. Letarg you will die!"
        #        [/message]
        #        [modify_side]
        #            side=3
        #            team_name=rogue_side
        #        [/modify_side]
        #   [/then]
        #    [elseif]
        #        [have_unit]
        #            if=Heford2
        #        [/have_unit]
        #        [then]
        #            [message]
        #                speaker=Heford2             
        #                message= _ "NOOOO! I should never have betrayed Wesnoth. Letarg you will die!"
        #            [/message]
        #            [modify_side]
        #                side=4
        #                team_name=rogue_side
        #            [/modify_side]
        #       [/then]
        #    [/elseif]
        #    [elseif]
        #        [have_unit]
        #            if=Heford3
        #        [/have_unit]
        #        [then]
        #            [message]
        #                speaker=Heford3
        #                message= _ "NOOOO! I should never have betrayed Wesnoth. Letarg you will die!"
        #            [/message]
        #            [modify_side]
        #                side=6
        #                team_name=rogue_side
        #            [/modify_side]
        #       [/then]
        #    [/elseif]
        #    [elseif]
        #        [have_unit]
        #            if=Heford4
        #        [/have_unit]
        #        [then]
        #            [message]
        #                speaker=Heford4            
        #                message= _ "NOOOO! I should never have betrayed Wesnoth. Letarg you will die!"
        #            [/message]
        #            [modify_side]
        #                side=7
        #                team_name=rogue_side
        #            [/modify_side]
        #       [/then]
        #    [/elseif]
        #[/if]
    [/event]

    #Death Death? 
    [event]
        name=last breath
        [filter]
            id=Death
        [/filter]
        [message]
            speaker=Death
            message="No! How? I am the Master Assassin, my school will last until the end of time. I AM DEATH."
        [/message]
        [message]
            speaker=second_unit
            message="Wait, this is no orc, this is some kind of halfhuman-halforc bastard."
        [/message]
    [/event]

    #First General Death
    [event]
        name=last breath
        [filter]
            canrecruit=yes
            side=3,4,6,7
        [/filter]
        [message]
            speaker=unit
            message= _ "Noo! How could I have lost against those stupid brutes!" #I should have never betrayed Adirsu!"
        [/message]
        [message]
            speaker=Tragtrad
            message= _ "Alright, one done, keep going!"
        [/message]
    [/event]

    #Ost General
    [event]
        name=last breath
        [filter]
            id=Heford3
        [/filter]
        [message]
            speaker=Heford3
            message= _ "I am sorry... I die with honor for my true queen!"
        [/message]
        [if]
            [variable]
                name=lich_summoned
                not_equals=yes
            [/variable]
            [then]
                [message]
                    speaker=Tragtrad
                    message= _ "Who's he talking about?"
                [/message]
            [/then]
            [else]
                [message]
                    speaker=Tragtrad
                    message= _ "Yeah... she seem real nice... worth dying for..."
                [/message]
            [/else]
        [/if]
    [/event]

	{MARAST_DEATH}
    {FLOYD_DEATH}

	#Umaduro dies
    [event]
        name=last breath
        [filter]
            id=Umaduro
        [/filter]

        [message]
            speaker=Umaduro
            message= _ "Tragtrad, please. Don't betray your race..."
        [/message]
    [/event]

    {SPECIAL_TROLL_DEATH}

	#Defeats
	#{UMADURO_DEFEAT_DEATH}
    #Defeat Manma died
    [event]
        name=last breath
        [filter]
            id=Manma
        [/filter]
        [message]
            speaker=Tragtrad
            message= _ "Alright, it's over."
        [/message]
        {FEEDBACK}
        [endlevel]
            result=defeat
        [/endlevel]
    [/event] 
	{TRAGTRAD_DEFEAT_DEATH}

    #victory
    [event]
        name=enter_hex
        first_time_only=no
        [filter]
            side=1
            race=orc,troll,wolf
            [or]
                id = King
            [/or]
        [/filter]

        [if]
            [have_unit]
                side=1
                race=orc,troll,wolf
                [filter_adjacent] 
                    id = King
                [/filter_adjacent] 
            [/have_unit]
            [then]
                [message]
                    speaker=King
                    message= _ "No, No, No. Leave me alone. I am surrounded by idiots, fools, fools everywhere."
                [/message]
                [message]
                    speaker=Tragtrad 
                    message= _ "Alright shut this guy up now. Manma!"
                [/message]
                [move_unit]
                    side=1
                    id = Manma
                    to_x = 13
                    to_y = 50
                [/move_unit]
                [message]
                    speaker=Manma 
                    message= _ "(Takes the crown)"
                [/message]
                [message]
                    speaker=Manma 
                    message= _ "(whispering to Letarg) I should let my blade drink your blood for the incompetence with which you dragged Wesnoth down, for all the good men who died needlessly for you, for my brother who gave his life for a better future for Wesnoth! But I need you to lose all legitimacy, so you better start kneeling now!"
                [/message]
                [move_unit_fake]
                    side=5
                    type=Cavalryman
                    x=24,16
                    y=52,50
                [/move_unit_fake]
                [unit]
                    type=Cavalryman
                    id=Messenger_Clans
                    name= _ "Messenger"
                    x=16
                    y=50
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_INTELLIGENT}
                    [/modifications]
                [/unit]
                [move_unit_fake]
                    side=5
                    type=Cavalryman
                    x=24,14
                    y=52,51
                [/move_unit_fake]
                [unit]
                    type=Cavalryman
                    id=Messenger_Waitanende
                    name= _ "Messenger"
                    x=14
                    y=51
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_INTELLIGENT}
                    [/modifications]
                [/unit]
                [move_unit_fake]
                    side=5
                    type=Cavalryman
                    x=24,12
                    y=52,51
                [/move_unit_fake]
                [unit]
                    type=Cavalryman
                    id=Messenger_Army
                    name= _ "Messenger"
                    x=12
                    y=51
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_INTELLIGENT}
                    [/modifications]
                [/unit]
                [move_unit_fake]
                    side=5
                    type=Cavalryman
                    x=24,10
                    y=52,50
                [/move_unit_fake]
                [unit]
                    type=Cavalryman
                    id=Messenger_Elensefar
                    name= _ "Messenger"
                    x=10
                    y=50
                    side=5
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_INTELLIGENT}
                    [/modifications]
                [/unit]
                [message]
                    speaker=Manma 
                    message= _ "Guards, thow the usurper in the dungeons, I will deal with him when I need to!"
                [/message]
                [move_unit]
                    id=King
                    to_x=13
                    to_y=52
                [/move_unit]
                [kill]
                    id =King
                [/kill]
                [move_unit]
                    side=1
                    id = Manma
                    to_x = 13
                    to_y = 49
                [/move_unit]
                [message]
                    speaker=Manma 
                    message= _ "The clans wait at the outskirts of Weldyn for news, tell them Wesnoth has a legitimate ruler once more. And tell them to ready themselves for what I told them beforehand!"
                [/message]
                [message]
                    speaker=Messenger_Clans
                    message= _ "Yes my king."
                [/message]
                [move_unit]
                    id=Messenger_Clans
                    to_x=25
                    to_y=3
                [/move_unit]
                [kill]
                    id=Messenger_Clans
                [/kill]
                [message]
                    speaker=Manma 
                    message= _ "The barons need to know of the new ruler, send north to Tarth, notify Dan'Tonk, ride to Waitanende and tell the coast-barons. I want all barons in Wesnoth to come to Weldyn and pay homage."
                [/message]
                [message]
                    speaker=Messenger_Waitanende
                    message= _ "Yes my king."
                [/message]
                [move_unit]
                    id=Messenger_Waitanende
                    to_x=1
                    to_y=29
                [/move_unit]
                [kill]
                    id=Messenger_Waitanende
                [/kill]
                [message]
                    speaker=Manma
                    message= _ "The army is mobilised, it must have orders, otherwise it will turn to savagery, ride towards the army, exchange the generals with trustworthy man of Parthyn in my name, they shall gather at the Ford of Abez, for my brother."
                [/message]
                [message]
                    speaker=Messenger_Army
                    message= _ "Yes my king."
                [/message]
                [move_unit]
                    id=Messenger_Army
                    to_x=1
                    to_y=7
                [/move_unit]
                [kill]
                    id=Messenger_Army
                [/kill]
                [message]
                    speaker=Manma
                    message= _ "Humans can not war amongst themselves. Send to Elensefar and tell the council there is need for a new treaty between Elensefar and Wesnoth."
                [/message]
                [message]
                    speaker=Messenger_Elensefar
                    message= _ "Yes my king."
                [/message]
                [move_unit]
                    id=Messenger_Elensefar
                    to_x=1
                    to_y=7
                [/move_unit]
                [kill]
                    id=Messenger_Elensefar
                [/kill]
                [message]
                    speaker=Manma 
                    message= _ "The blood of my great grandfather, Haldric IV now sits in the Wesnoth throne again. The time has come to free Wesnoth from its insurrection of the commoner’s queen and her illegitimate offspring. For the next five days there will be a holiday for the free Wesnoth Army!"
                [/message]
                [modify_unit]
                    [filter]
                        race=human
                    [/filter]
                    side=9
                [/modify_unit]
                [if]
                    [have_unit]
                        id=Umaduro
                    [/have_unit]
                    [then]                    
                        [move_unit]
                            id=Umaduro
                            to_x=13
                            to_y=51
                        [/move_unit]
                        [message]
                            speaker=Tragtrad
                            message= _ "It is time for a new age between the orcs and humans!"
                        [/message]
                        [message]
                            speaker=Manma
                            message= _ "That is correct. A new age."
                        [/message]
                        [message]
                            speaker=Manma
                            message= _ "One where we humans can finally sleep in peace."
                        [/message]
                        [harm_unit]
                            [filter]
                                id=Umaduro
                            [/filter]
                            [filter_second]
                                id=Manma
                            [/filter_second]
                            amount=40#scepter of fire
                            kill=no
                            animate=yes
                            experience=no
                        [/harm_unit]
                        [message]
                            speaker=Manma
                            message= _ "Men of Wesnoth, march against these foreign invaders! For every orcish head you bring me, I will reward you with 100 gold pieces!"
                        [/message]
                        [message]
                            speaker=Umaduro
                            message= _ "Tragtrad, why?"
                        [/message]
                        [harm_unit]
                            [filter]
                                id=Umaduro
                            [/filter]
                            [filter_second]
                                id=Manma
                            [/filter_second]
                            amount=40#scepter of fire
                            kill=yes
                            animate=yes
                            experience=no
                        [/harm_unit]
                    [/then]
                    [else]
                        [message]
                            speaker=Tragtrad
                            message= _ "It is time for a new age between the orcs and humans!"
                        [/message]
                        [message]
                            speaker=Manma
                            message= _ "That is correct. A new age."
                        [/message]
                        [message]
                            speaker=Manma
                            message= _ "One where we humans can finally sleep in peace."
                        [/message]
                        [message]
                            speaker=Manma
                            message= _ "Men of Wesnoth, march against these foreign invaders! For every orcish head you bring me, I will reward you with 100 gold pieces!"
                        [/message]
                    [/else]
                [/if]
                [message]
                    speaker=Tragtrad
                    message= _ "No, no, NO!"
                [/message]
                [delay]
                    time = 3000
                [/delay]
                [message]
                    speaker=Tragtrad
                    message= _ "(Silently to himself) First Orion, then Volk, now Manma. I only wanted peace for my people, but now I've doomed them. I should never have trusted the humans."
                [/message]
                [endlevel]
                    result=victory
                    bonus=no
                    carryover_percentage=0
                    carryover_add=no
                [/endlevel]
            [/then]
        [/if]
    [/event]
    
[/scenario]